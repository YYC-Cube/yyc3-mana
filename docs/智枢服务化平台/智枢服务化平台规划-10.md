# ğŸŒŸ æ™ºèƒ½é¤é¥®ç³»ç»Ÿ - å…¨é‡å¼€å‘è€…æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ç›®å½•ç»“æ„

smart-restaurant-system/
â”œâ”€â”€ ğŸ“ 01-é¡¹ç›®æ¦‚è¿°/
â”‚   â”œâ”€â”€ é¡¹ç›®æ„¿æ™¯ä¸ç›®æ ‡.md
â”‚   â”œâ”€â”€ ä¸šåŠ¡èŒƒå›´æ–‡æ¡£.md
â”‚   â”œâ”€â”€ æˆåŠŸæŒ‡æ ‡å®šä¹‰.md
â”‚   â””â”€â”€ é¡¹ç›®è·¯çº¿å›¾.md
â”œâ”€â”€ ğŸ“ 02-æŠ€æœ¯æ¶æ„/
â”‚   â”œâ”€â”€ æ€»ä½“æ¶æ„è®¾è®¡.md
â”‚   â”œâ”€â”€ å¾®æœåŠ¡æ¶æ„å›¾.md
â”‚   â”œâ”€â”€ æ•°æ®æµæ¶æ„.md
â”‚   â”œâ”€â”€ å®‰å…¨æ¶æ„è®¾è®¡.md
â”‚   â””â”€â”€ éƒ¨ç½²æ¶æ„å›¾.md
â”œâ”€â”€ ğŸ“ 03-å¼€å‘ç¯å¢ƒ/
â”‚   â”œâ”€â”€ ç¯å¢ƒé…ç½®æŒ‡å—.md
â”‚   â”œâ”€â”€ å¼€å‘å·¥å…·é“¾.md
â”‚   â”œâ”€â”€ æœ¬åœ°å¼€å‘ç¯å¢ƒ.md
â”‚   â””â”€â”€ è°ƒè¯•ä¸æµ‹è¯•ç¯å¢ƒ.md
â”œâ”€â”€ ğŸ“ 04-æ•°æ®åº“è®¾è®¡/
â”‚   â”œâ”€â”€ æ•°æ®åº“ERå›¾/
â”‚   â”‚   â”œâ”€â”€ æ ¸å¿ƒä¸šåŠ¡ERå›¾.md
â”‚   â”‚   â”œâ”€â”€ ç”¨æˆ·æƒé™ERå›¾.md
â”‚   â”‚   â”œâ”€â”€ è¿›é”€å­˜ERå›¾.md
â”‚   â”‚   â””â”€â”€ è´¢åŠ¡æˆæœ¬ERå›¾.md
â”‚   â”œâ”€â”€ æ•°æ®å­—å…¸/
â”‚   â”‚   â”œâ”€â”€ æ ¸å¿ƒä¸šåŠ¡è¡¨.md
â”‚   â”‚   â”œâ”€â”€ æ™ºèƒ½èœå•è¡¨.md
â”‚   â”‚   â”œâ”€â”€ è¿›é”€å­˜è¡¨.md
â”‚   â”‚   â”œâ”€â”€ æˆæœ¬ç®¡ç†è¡¨.md
â”‚   â”‚   â””â”€â”€ ç³»ç»Ÿç®¡ç†è¡¨.md
â”‚   â”œâ”€â”€ æ•°æ®åº“è„šæœ¬/
â”‚   â”‚   â”œâ”€â”€ åˆå§‹åŒ–è„šæœ¬/
â”‚   â”‚   â”œâ”€â”€ è¿ç§»è„šæœ¬/
â”‚   â”‚   â””â”€â”€ æ•°æ®ç§å­/
â”‚   â””â”€â”€ æ€§èƒ½ä¼˜åŒ–æŒ‡å—.md
â”œâ”€â”€ ğŸ“ 05-APIæ–‡æ¡£/
â”‚   â”œâ”€â”€ APIæ€»è§ˆ.md
â”‚   â”œâ”€â”€ è®¤è¯æˆæƒAPI.md
â”‚   â”œâ”€â”€ ç”¨æˆ·ç®¡ç†API.md
â”‚   â”œâ”€â”€ æ™ºèƒ½èœå•API.md
â”‚   â”œâ”€â”€ è¿›é”€å­˜API.md
â”‚   â”œâ”€â”€ æˆæœ¬ç®¡ç†API.md
â”‚   â”œâ”€â”€ æŠ¥è¡¨åˆ†æAPI.md
â”‚   â””â”€â”€ ç³»ç»Ÿç®¡ç†API.md
â”œâ”€â”€ ğŸ“ 06-å‰ç«¯å¼€å‘/
â”‚   â”œâ”€â”€ å‰ç«¯æ¶æ„è®¾è®¡.md
â”‚   â”œâ”€â”€ ç»„ä»¶åº“æ–‡æ¡£/
â”‚   â”‚   â”œâ”€â”€ åŸºç¡€ç»„ä»¶.md
â”‚   â”‚   â”œâ”€â”€ ä¸šåŠ¡ç»„ä»¶.md
â”‚   â”‚   â”œâ”€â”€ å¸ƒå±€ç»„ä»¶.md
â”‚   â”‚   â””â”€â”€ å›¾è¡¨ç»„ä»¶.md
â”‚   â”œâ”€â”€ é¡µé¢è·¯ç”±è®¾è®¡.md
â”‚   â”œâ”€â”€ çŠ¶æ€ç®¡ç†æŒ‡å—.md
â”‚   â””â”€â”€ æ€§èƒ½ä¼˜åŒ–æŒ‡å—.md
â”œâ”€â”€ ğŸ“ 07-åç«¯å¼€å‘/
â”‚   â”œâ”€â”€ å¾®æœåŠ¡è®¾è®¡/
â”‚   â”‚   â”œâ”€â”€ ç”¨æˆ·æœåŠ¡.md
â”‚   â”‚   â”œâ”€â”€ èœå•æœåŠ¡.md
â”‚   â”‚   â”œâ”€â”€ è®¢å•æœåŠ¡.md
â”‚   â”‚   â”œâ”€â”€ åº“å­˜æœåŠ¡.md
â”‚   â”‚   â”œâ”€â”€ æˆæœ¬æœåŠ¡.md
â”‚   â”‚   â””â”€â”€ æŠ¥è¡¨æœåŠ¡.md
â”‚   â”œâ”€â”€ æ ¸å¿ƒä¸šåŠ¡é€»è¾‘/
â”‚   â”‚   â”œâ”€â”€ æ™ºèƒ½æ¨èç®—æ³•.md
â”‚   â”‚   â”œâ”€â”€ æˆæœ¬è®¡ç®—å¼•æ“.md
â”‚   â”‚   â”œâ”€â”€ åº“å­˜ä¼˜åŒ–ç®—æ³•.md
â”‚   â”‚   â””â”€â”€ é¢„æµ‹åˆ†ææ¨¡å‹.md
â”‚   â”œâ”€â”€ å·¥å…·ç±»åº“/
â”‚   â”‚   â”œâ”€â”€ é€šç”¨å·¥å…·ç±».md
â”‚   â”‚   â”œâ”€â”€ æ•°æ®æ ¡éªŒå·¥å…·.md
â”‚   â”‚   â”œâ”€â”€ åŠ å¯†è§£å¯†å·¥å…·.md
â”‚   â”‚   â””â”€â”€ æ–‡ä»¶å¤„ç†å·¥å…·.md
â”‚   â””â”€â”€ é…ç½®ç®¡ç†æŒ‡å—.md
â”œâ”€â”€ ğŸ“ 08-æµ‹è¯•æ–‡æ¡£/
â”‚   â”œâ”€â”€ å•å…ƒæµ‹è¯•æŒ‡å—.md
â”‚   â”œâ”€â”€ é›†æˆæµ‹è¯•æŒ‡å—.md
â”‚   â”œâ”€â”€ æ€§èƒ½æµ‹è¯•æŒ‡å—.md
â”‚   â”œâ”€â”€ å®‰å…¨æµ‹è¯•æŒ‡å—.md
â”‚   â””â”€â”€ è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬/
â”œâ”€â”€ ğŸ“ 09-éƒ¨ç½²è¿ç»´/
â”‚   â”œâ”€â”€ å®¹å™¨åŒ–éƒ¨ç½²/
â”‚   â”‚   â”œâ”€â”€ Dockerfileæ¨¡æ¿/
â”‚   â”‚   â”œâ”€â”€ Docker Composeé…ç½®/
â”‚   â”‚   â””â”€â”€ Kubernetesé…ç½®/
â”‚   â”œâ”€â”€ CI/CDæµæ°´çº¿/
â”‚   â”‚   â”œâ”€â”€ Jenkinsfileé…ç½®/
â”‚   â”‚   â”œâ”€â”€ GitLab CIé…ç½®/
â”‚   â”‚   â””â”€â”€ éƒ¨ç½²è„šæœ¬/
â”‚   â”œâ”€â”€ ç›‘æ§å‘Šè­¦/
â”‚   â”‚   â”œâ”€â”€ ä¸šåŠ¡ç›‘æ§é…ç½®.md
â”‚   â”‚   â”œâ”€â”€ æŠ€æœ¯ç›‘æ§é…ç½®.md
â”‚   â”‚   â””â”€â”€ å‘Šè­¦è§„åˆ™é…ç½®.md
â”‚   â””â”€â”€ è¿ç»´æ‰‹å†Œ.md
â”œâ”€â”€ ğŸ“ 10-å¼€å‘è§„èŒƒ/
â”‚   â”œâ”€â”€ ä»£ç è§„èŒƒ/
â”‚   â”‚   â”œâ”€â”€ Javaå¼€å‘è§„èŒƒ.md
â”‚   â”‚   â”œâ”€â”€ Vueå¼€å‘è§„èŒƒ.md
â”‚   â”‚   â”œâ”€â”€ SQLç¼–å†™è§„èŒƒ.md
â”‚   â”‚   â””â”€â”€ æ¥å£è®¾è®¡è§„èŒƒ.md
â”‚   â”œâ”€â”€ Gitå·¥ä½œæµ.md
â”‚   â”œâ”€â”€ æ–‡æ¡£ç¼–å†™è§„èŒƒ.md
â”‚   â””â”€â”€ å®‰å…¨å¼€å‘è§„èŒƒ.md
â””â”€â”€ ğŸ“ 11-é¡¹ç›®å·¥å…·/
    â”œâ”€â”€ ä»£ç ç”Ÿæˆå™¨/
    â”œâ”€â”€ æ•°æ®åº“è¿ç§»å·¥å…·/
    â”œâ”€â”€ APIæµ‹è¯•å·¥å…·/
    â””â”€â”€ æ€§èƒ½åˆ†æå·¥å…·/

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„è¯¦ç»†è®¾è®¡

### æ€»ä½“æŠ€æœ¯æ¶æ„

```yaml
æ¶æ„å±‚æ¬¡:
  å‰ç«¯å±‚:
    âœ… Webåº”ç”¨: Vue 3 + TypeScript + Element Plus
    âœ… ç§»åŠ¨ç«¯: å°ç¨‹åº + Flutter
    âœ… ç®¡ç†ç«¯: Vue 3 + Admin Template

  ç½‘å…³å±‚:
    âœ… APIç½‘å…³: Spring Cloud Gateway
    âœ… èº«ä»½è®¤è¯: Keycloak + JWT
    âœ… æµé‡æ§åˆ¶: Sentinel
    âœ… å®‰å…¨é˜²æŠ¤: WAFè§„åˆ™

  å¾®æœåŠ¡å±‚:
    âœ… ç”¨æˆ·æœåŠ¡: ç”¨æˆ·ç®¡ç† + æƒé™æ§åˆ¶
    âœ… èœå•æœåŠ¡: æ™ºèƒ½èœå• + æ¨èç®—æ³•
    âœ… è®¢å•æœåŠ¡: è®¢å•ç®¡ç† + æ”¯ä»˜å¤„ç†
    âœ… åº“å­˜æœåŠ¡: è¿›é”€å­˜ç®¡ç†
    âœ… æˆæœ¬æœåŠ¡: æˆæœ¬è®¡ç®— + åˆ†æ
    âœ… æŠ¥è¡¨æœåŠ¡: æ•°æ®åˆ†æ + å¯è§†åŒ–

  æ•°æ®å±‚:
    âœ… å…³ç³»æ•°æ®åº“: PostgreSQLé›†ç¾¤
    âœ… ç¼“å­˜æ•°æ®åº“: Redisé›†ç¾¤
    âœ… æœç´¢å¼•æ“: Elasticsearch
    âœ… æ—¶åºæ•°æ®åº“: InfluxDB
    âœ… å›¾æ•°æ®åº“: Neo4j

  åŸºç¡€è®¾æ–½:
    âœ… å®¹å™¨å¹³å°: Kubernetes
    âœ… æœåŠ¡ç½‘æ ¼: Istio
    âœ… ç›‘æ§ç³»ç»Ÿ: Prometheus + Grafana
    âœ… æ—¥å¿—ç³»ç»Ÿ: ELK Stack
    âœ… æ¶ˆæ¯é˜Ÿåˆ—: Kafka
```text

### å¾®æœåŠ¡æ¶æ„è®¾è®¡

```java
// å¾®æœåŠ¡åŸºç¡€æ¶æ„ç¤ºä¾‹
@SpringBootApplication
@EnableDiscoveryClient
@EnableFeignClients
public class MenuServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(MenuServiceApplication.class, args);
    }
}

// æœåŠ¡é…ç½®
@Configuration
public class ServiceConfig {
    
    @Bean
    @LoadBalanced
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }
    
    @Bean
    public Feign.Builder feignBuilder() {
        return Feign.builder()
                .encoder(new JacksonEncoder())
                .decoder(new JacksonDecoder())
                .contract(new SpringMvcContract());
    }
}
```text

---

## ğŸ—„ï¸ æ•°æ®åº“è¯¦ç»†è®¾è®¡

### æ ¸å¿ƒä¸šåŠ¡è¡¨ç»“æ„

#### ç”¨æˆ·æƒé™æ¨¡å—

```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    phone VARCHAR(20),
    password_hash VARCHAR(255) NOT NULL,
    real_name VARCHAR(50),
    avatar_url VARCHAR(255),
    status VARCHAR(20) DEFAULT 'ACTIVE',
    last_login_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by BIGINT,
    updated_by BIGINT
);

-- è§’è‰²è¡¨
CREATE TABLE roles (
    id BIGSERIAL PRIMARY KEY,
    role_code VARCHAR(50) NOT NULL UNIQUE,
    role_name VARCHAR(100) NOT NULL,
    description TEXT,
    status VARCHAR(20) DEFAULT 'ACTIVE',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æƒé™è¡¨
CREATE TABLE permissions (
    id BIGSERIAL PRIMARY KEY,
    perm_code VARCHAR(100) NOT NULL UNIQUE,
    perm_name VARCHAR(200) NOT NULL,
    resource_type VARCHAR(50) NOT NULL,
    resource_id BIGINT,
    action VARCHAR(50) NOT NULL,
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```text

#### æ™ºèƒ½èœå•æ¨¡å—

```sql
-- èœå“è¡¨
CREATE TABLE dishes (
    id BIGSERIAL PRIMARY KEY,
    dish_code VARCHAR(50) NOT NULL UNIQUE,
    dish_name VARCHAR(200) NOT NULL,
    description TEXT,
    category_id BIGINT NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    cost_price DECIMAL(10,2),
    image_url VARCHAR(500),
    tags JSONB,
    nutrition_info JSONB,
    cooking_time INT,
    spiciness_level INT,
    status VARCHAR(20) DEFAULT 'ACTIVE',
    sort_order INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- èœå•è¡¨
CREATE TABLE menus (
    id BIGSERIAL PRIMARY KEY,
    menu_name VARCHAR(200) NOT NULL,
    restaurant_id BIGINT NOT NULL,
    menu_type VARCHAR(50) NOT NULL,
    valid_from DATE NOT NULL,
    valid_to DATE NOT NULL,
    status VARCHAR(20) DEFAULT 'DRAFT',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- èœå•èœå“å…³è”è¡¨
CREATE TABLE menu_dishes (
    id BIGSERIAL PRIMARY KEY,
    menu_id BIGINT NOT NULL,
    dish_id BIGINT NOT NULL,
    display_order INT NOT NULL,
    special_price DECIMAL(10,2),
    recommendation_weight DECIMAL(5,4) DEFAULT 1.0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(menu_id, dish_id)
);
```text

#### è¿›é”€å­˜æ¨¡å—

```sql
-- ä¾›åº”å•†è¡¨
CREATE TABLE suppliers (
    id BIGSERIAL PRIMARY KEY,
    supplier_code VARCHAR(50) NOT NULL UNIQUE,
    supplier_name VARCHAR(200) NOT NULL,
    contact_person VARCHAR(100),
    phone VARCHAR(20),
    email VARCHAR(100),
    address TEXT,
    rating DECIMAL(3,2) DEFAULT 5.0,
    status VARCHAR(20) DEFAULT 'ACTIVE',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- åŸææ–™è¡¨
CREATE TABLE raw_materials (
    id BIGSERIAL PRIMARY KEY,
    material_code VARCHAR(50) NOT NULL UNIQUE,
    material_name VARCHAR(200) NOT NULL,
    category_id BIGINT NOT NULL,
    unit VARCHAR(20) NOT NULL,
    unit_price DECIMAL(10,4) NOT NULL,
    supplier_id BIGINT,
    shelf_life_days INT,
    storage_conditions JSONB,
    status VARCHAR(20) DEFAULT 'ACTIVE',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- åº“å­˜è¡¨
CREATE TABLE inventory (
    id BIGSERIAL PRIMARY KEY,
    material_id BIGINT NOT NULL,
    warehouse_id BIGINT NOT NULL,
    current_stock DECIMAL(12,4) NOT NULL DEFAULT 0,
    safety_stock DECIMAL(12,4) NOT NULL DEFAULT 0,
    max_stock DECIMAL(12,4),
    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(material_id, warehouse_id)
);

-- é‡‡è´­è®¢å•è¡¨
CREATE TABLE purchase_orders (
    id BIGSERIAL PRIMARY KEY,
    order_code VARCHAR(50) NOT NULL UNIQUE,
    supplier_id BIGINT NOT NULL,
    total_amount DECIMAL(12,2) NOT NULL,
    status VARCHAR(20) DEFAULT 'PENDING',
    expected_delivery_date DATE,
    actual_delivery_date DATE,
    created_by BIGINT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```text

#### æˆæœ¬ç®¡ç†æ¨¡å—

```sql
-- æˆæœ¬é¡¹ç›®è¡¨
CREATE TABLE cost_items (
    id BIGSERIAL PRIMARY KEY,
    cost_code VARCHAR(50) NOT NULL UNIQUE,
    cost_name VARCHAR(200) NOT NULL,
    cost_type VARCHAR(50) NOT NULL,
    parent_id BIGINT,
    level INT NOT NULL DEFAULT 1,
    is_leaf BOOLEAN DEFAULT true,
    calculation_method VARCHAR(50),
    status VARCHAR(20) DEFAULT 'ACTIVE',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æˆæœ¬è®°å½•è¡¨
CREATE TABLE cost_records (
    id BIGSERIAL PRIMARY KEY,
    cost_item_id BIGINT NOT NULL,
    period_date DATE NOT NULL,
    amount DECIMAL(15,4) NOT NULL,
    quantity DECIMAL(12,4),
    unit_price DECIMAL(10,4),
    reference_type VARCHAR(50),
    reference_id BIGINT,
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(cost_item_id, period_date, reference_type, reference_id)
);

-- æˆæœ¬åˆ†é…è§„åˆ™è¡¨
CREATE TABLE cost_allocation_rules (
    id BIGSERIAL PRIMARY KEY,
    rule_name VARCHAR(200) NOT NULL,
    source_cost_item_id BIGINT NOT NULL,
    target_type VARCHAR(50) NOT NULL,
    allocation_base VARCHAR(100) NOT NULL,
    allocation_rate DECIMAL(8,6) NOT NULL,
    status VARCHAR(20) DEFAULT 'ACTIVE',
    valid_from DATE NOT NULL,
    valid_to DATE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```text

### æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

```sql
-- å¸¸ç”¨æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_users_status ON users(status);
CREATE INDEX idx_dishes_category ON dishes(category_id, status);
CREATE INDEX idx_menu_dishes_menu ON menu_dishes(menu_id, display_order);
CREATE INDEX idx_inventory_material ON inventory(material_id);
CREATE INDEX idx_purchase_orders_status ON purchase_orders(status, created_at);
CREATE INDEX idx_cost_records_period ON cost_records(period_date, cost_item_id);

-- å¤åˆç´¢å¼•
CREATE INDEX idx_orders_composite ON orders(restaurant_id, status, created_at);
CREATE INDEX idx_inventory_composite ON inventory(warehouse_id, material_id, current_stock);
```text

---

## ğŸ”— APIæ¥å£è¯¦ç»†è®¾è®¡

### APIé€šç”¨è§„èŒƒ

#### è¯·æ±‚å“åº”æ ¼å¼

```java
// ç»Ÿä¸€å“åº”å¯¹è±¡
@Data
@AllArgsConstructor
@NoArgsConstructor
public class ApiResponse<T> {
    private boolean success;
    private String code;
    private String message;
    private T data;
    private Long timestamp;
    private String requestId;
    
    public static <T> ApiResponse<T> success(T data) {
        return new ApiResponse<>(true, "SUCCESS", "æ“ä½œæˆåŠŸ", data, 
                               System.currentTimeMillis(), generateRequestId());
    }
    
    public static ApiResponse<Object> error(String code, String message) {
        return new ApiResponse<>(false, code, message, null, 
                               System.currentTimeMillis(), generateRequestId());
    }
}

// åˆ†é¡µå“åº”å¯¹è±¡
@Data
public class PageResponse<T> {
    private List<T> list;
    private long total;
    private int page;
    private int size;
    private int pages;
    
    public static <T> PageResponse<T> of(List<T> list, long total, int page, int size) {
        PageResponse<T> response = new PageResponse<>();
        response.setList(list);
        response.setTotal(total);
        response.setPage(page);
        response.setSize(size);
        response.setPages((int) Math.ceil((double) total / size));
        return response;
    }
}
```text

### æ ¸å¿ƒä¸šåŠ¡API

#### æ™ºèƒ½èœå•API

```java
@RestController
@RequestMapping("/api/v1/menus")
@Validated
@Api(tags = "æ™ºèƒ½èœå•ç®¡ç†")
public class MenuController {
    
    @Autowired
    private MenuService menuService;
    
    @GetMapping("/dynamic")
    @ApiOperation("è·å–åŠ¨æ€èœå•")
    public ApiResponse<DynamicMenuDTO> getDynamicMenu(
            @RequestParam @NotBlank String restaurantId,
            @RequestParam(required = false) String userId,
            @RequestParam(required = false) String context) {
        
        DynamicMenuDTO menu = menuService.generateDynamicMenu(restaurantId, userId, context);
        return ApiResponse.success(menu);
    }
    
    @PostMapping("/{menuId}/recommendations")
    @ApiOperation("è·å–èœå“æ¨è")
    public ApiResponse<List<DishRecommendationDTO>> getRecommendations(
            @PathVariable @NotBlank String menuId,
            @RequestBody @Valid RecommendationRequest request) {
        
        List<DishRecommendationDTO> recommendations = 
            menuService.getDishRecommendations(menuId, request);
        return ApiResponse.success(recommendations);
    }
    
    @GetMapping("/{menuId}/dishes/{dishId}/price")
    @ApiOperation("è·å–åŠ¨æ€å®šä»·")
    public ApiResponse<DynamicPriceDTO> getDynamicPrice(
            @PathVariable String menuId,
            @PathVariable String dishId,
            @RequestParam String context) {
        
        DynamicPriceDTO price = menuService.calculateDynamicPrice(menuId, dishId, context);
        return ApiResponse.success(price);
    }
}

// DTOå®šä¹‰
@Data
@ApiModel("æ¨èè¯·æ±‚")
public class RecommendationRequest {
    @ApiModelProperty("ç”¨æˆ·ID")
    private String userId;
    
    @ApiModelProperty("ä¸Šä¸‹æ–‡ä¿¡æ¯")
    private Map<String, Object> context;
    
    @ApiModelProperty("æ¨èæ•°é‡")
    @Range(min = 1, max = 20)
    private Integer limit = 10;
}

@Data
@ApiModel("åŠ¨æ€èœå•DTO")
public class DynamicMenuDTO {
    @ApiModelProperty("èœå•ID")
    private String menuId;
    
    @ApiModelProperty("èœå•åç§°")
    private String menuName;
    
    @ApiModelProperty("èœå“åˆ—è¡¨")
    private List<DynamicDishDTO> dishes;
    
    @ApiModelProperty("æ¨èèœå“")
    private List<DishRecommendationDTO> recommendations;
}

@Data
@ApiModel("åŠ¨æ€å®šä»·DTO")
public class DynamicPriceDTO {
    @ApiModelProperty("åŸºç¡€ä»·æ ¼")
    private BigDecimal basePrice;
    
    @ApiModelProperty("åŠ¨æ€ä»·æ ¼")
    private BigDecimal dynamicPrice;
    
    @ApiModelProperty("å®šä»·å› ç´ ")
    private List<PricingFactorDTO> factors;
    
    @ApiModelProperty("ä»·æ ¼æœ‰æ•ˆæœŸ")
    private LocalDateTime priceExpiry;
}
```text

#### è¿›é”€å­˜API

```java
@RestController
@RequestMapping("/api/v1/inventory")
@Validated
@Api(tags = "è¿›é”€å­˜ç®¡ç†")
public class InventoryController {
    
    @Autowired
    private InventoryService inventoryService;
    
    @GetMapping("/materials")
    @ApiOperation("åˆ†é¡µæŸ¥è¯¢åŸææ–™")
    public ApiResponse<PageResponse<MaterialDTO>> getMaterials(
            @RequestParam(required = false) String keyword,
            @RequestParam(required = false) String categoryId,
            @RequestParam(defaultValue = "1") int page,
            @RequestParam(defaultValue = "20") int size) {
        
        PageResponse<MaterialDTO> materials = 
            inventoryService.getMaterials(keyword, categoryId, page, size);
        return ApiResponse.success(materials);
    }
    
    @PostMapping("/purchase-orders")
    @ApiOperation("åˆ›å»ºé‡‡è´­è®¢å•")
    public ApiResponse<PurchaseOrderDTO> createPurchaseOrder(
            @RequestBody @Valid CreatePurchaseOrderRequest request) {
        
        PurchaseOrderDTO order = inventoryService.createPurchaseOrder(request);
        return ApiResponse.success(order);
    }
    
    @GetMapping("/stock-alerts")
    @ApiOperation("è·å–åº“å­˜é¢„è­¦")
    public ApiResponse<List<StockAlertDTO>> getStockAlerts(
            @RequestParam(required = false) String warehouseId) {
        
        List<StockAlertDTO> alerts = inventoryService.getStockAlerts(warehouseId);
        return ApiResponse.success(alerts);
    }
    
    @PostMapping("/materials/{materialId}/stock-adjustment")
    @ApiOperation("åº“å­˜è°ƒæ•´")
    public ApiResponse<StockAdjustmentDTO> adjustStock(
            @PathVariable String materialId,
            @RequestBody @Valid StockAdjustmentRequest request) {
        
        StockAdjustmentDTO adjustment = 
            inventoryService.adjustStock(materialId, request);
        return ApiResponse.success(adjustment);
    }
}

// è¯·æ±‚å¯¹è±¡
@Data
@ApiModel("åˆ›å»ºé‡‡è´­è®¢å•è¯·æ±‚")
public class CreatePurchaseOrderRequest {
    @ApiModelProperty(value = "ä¾›åº”å•†ID", required = true)
    @NotBlank
    private String supplierId;
    
    @ApiModelProperty(value = "è®¢å•æ˜ç»†", required = true)
    @Valid
    @NotEmpty
    private List<PurchaseOrderItemRequest> items;
    
    @ApiModelProperty("æœŸæœ›äº¤ä»˜æ—¥æœŸ")
    @Future
    private LocalDate expectedDeliveryDate;
    
    @ApiModelProperty("å¤‡æ³¨")
    private String remark;
}

@Data
@ApiModel("é‡‡è´­è®¢å•æ˜ç»†è¯·æ±‚")
public class PurchaseOrderItemRequest {
    @ApiModelProperty(value = "åŸææ–™ID", required = true)
    @NotBlank
    private String materialId;
    
    @ApiModelProperty(value = "é‡‡è´­æ•°é‡", required = true)
    @DecimalMin(value = "0.001")
    private BigDecimal quantity;
    
    @ApiModelProperty(value = "é‡‡è´­å•ä»·", required = true)
    @DecimalMin(value = "0.01")
    private BigDecimal unitPrice;
    
    @ApiModelProperty("å¤‡æ³¨")
    private String remark;
}
```text

#### æˆæœ¬ç®¡ç†API

```java
@RestController
@RequestMapping("/api/v1/costs")
@Validated
@Api(tags = "æˆæœ¬ç®¡ç†")
public class CostController {
    
    @Autowired
    private CostService costService;
    
    @GetMapping("/real-time")
    @ApiOperation("è·å–å®æ—¶æˆæœ¬")
    public ApiResponse<RealTimeCostDTO> getRealTimeCost(
            @RequestParam String costObjectType,
            @RequestParam String costObjectId) {
        
        RealTimeCostDTO cost = costService.getRealTimeCost(costObjectType, costObjectId);
        return ApiResponse.success(cost);
    }
    
    @PostMapping("/analysis")
    @ApiOperation("æˆæœ¬åˆ†æ")
    public ApiResponse<CostAnalysisDTO> analyzeCosts(
            @RequestBody @Valid CostAnalysisRequest request) {
        
        CostAnalysisDTO analysis = costService.analyzeCosts(request);
        return ApiResponse.success(analysis);
    }
    
    @GetMapping("/predictions")
    @ApiOperation("æˆæœ¬é¢„æµ‹")
    public ApiResponse<CostPredictionDTO> predictCosts(
            @RequestParam String costItemId,
            @RequestParam @Future LocalDate targetDate) {
        
        CostPredictionDTO prediction = costService.predictCost(costItemId, targetDate);
        return ApiResponse.success(prediction);
    }
    
    @PostMapping("/optimization-suggestions")
    @ApiOperation("è·å–æˆæœ¬ä¼˜åŒ–å»ºè®®")
    public ApiResponse<List<CostOptimizationSuggestionDTO>> getOptimizationSuggestions(
            @RequestBody @Valid OptimizationSuggestionRequest request) {
        
        List<CostOptimizationSuggestionDTO> suggestions = 
            costService.getOptimizationSuggestions(request);
        return ApiResponse.success(suggestions);
    }
}

// DTOå®šä¹‰
@Data
@ApiModel("å®æ—¶æˆæœ¬DTO")
public class RealTimeCostDTO {
    @ApiModelProperty("æˆæœ¬å¯¹è±¡ç±»å‹")
    private String costObjectType;
    
    @ApiModelProperty("æˆæœ¬å¯¹è±¡ID")
    private String costObjectId;
    
    @ApiModelProperty("ç›´æ¥æˆæœ¬")
    private BigDecimal directCost;
    
    @ApiModelProperty("é—´æ¥æˆæœ¬")
    private BigDecimal indirectCost;
    
    @ApiModelProperty("æ€»æˆæœ¬")
    private BigDecimal totalCost;
    
    @ApiModelProperty("æˆæœ¬æ„æˆ")
    private List<CostCompositionDTO> composition;
    
    @ApiModelProperty("æˆæœ¬è¶‹åŠ¿")
    private CostTrendDTO trend;
}

@Data
@ApiModel("æˆæœ¬åˆ†æè¯·æ±‚")
public class CostAnalysisRequest {
    @ApiModelProperty(value = "åˆ†æç±»å‹", required = true)
    @NotBlank
    private String analysisType;
    
    @ApiModelProperty(value = "å¼€å§‹æ—¥æœŸ", required = true)
    @NotNull
    private LocalDate startDate;
    
    @ApiModelProperty(value = "ç»“æŸæ—¥æœŸ", required = true)
    @NotNull
    private LocalDate endDate;
    
    @ApiModelProperty("æˆæœ¬é¡¹ç›®ID")
    private String costItemId;
    
    @ApiModelProperty("æˆæœ¬å¯¹è±¡ç±»å‹")
    private String costObjectType;
    
    @ApiModelProperty("æˆæœ¬å¯¹è±¡ID")
    private String costObjectId;
    
    @ApiModelProperty("åˆ†æç»´åº¦")
    private List<String> dimensions;
}
```text

---

## ğŸ¯ é¡¹ç›®æ ¸å¿ƒå®ç°

### æ™ºèƒ½æ¨èç®—æ³•æ ¸å¿ƒ

```java
@Service
public class IntelligentRecommendationEngine {
    
    @Autowired
    private UserBehaviorService userBehaviorService;
    
    @Autowired
    private DishService dishService;
    
    @Autowired
    private ContextAwareService contextAwareService;
    
    /**
     * æ™ºèƒ½èœå“æ¨è
     */
    public List<DishRecommendationDTO> recommendDishes(RecommendationContext context) {
        // 1. è·å–ç”¨æˆ·ç”»åƒ
        UserProfile userProfile = getUserProfile(context.getUserId());
        
        // 2. è·å–ä¸Šä¸‹æ–‡ä¿¡æ¯
        ContextInfo contextInfo = getContextInfo(context);
        
        // 3. å¤šç®—æ³•èåˆæ¨è
        List<DishScore> candidateDishes = multiAlgorithmFusion(userProfile, contextInfo);
        
        // 4. ä¸šåŠ¡è§„åˆ™è¿‡æ»¤
        List<DishScore> filteredDishes = applyBusinessRules(candidateDishes, contextInfo);
        
        // 5. å¤šæ ·æ€§ä¿è¯
        List<DishScore> finalDishes = ensureDiversity(filteredDishes);
        
        // 6. è½¬æ¢ä¸ºDTO
        return convertToDTO(finalDishes);
    }
    
    /**
     * å¤šç®—æ³•èåˆ
     */
    private List<DishScore> multiAlgorithmFusion(UserProfile userProfile, ContextInfo context) {
        List<DishScore> fusionScores = new ArrayList<>();
        
        // ååŒè¿‡æ»¤æ¨è
        List<DishScore> cfScores = collaborativeFiltering(userProfile, context);
        
        // å†…å®¹åŸºäºæ¨è
        List<DishScore> cbScores = contentBasedRecommendation(userProfile, context);
        
        // çƒ­é—¨æ¨è
        List<DishScore> popularScores = popularRecommendation(context);
        
        // æƒ…å¢ƒæ„ŸçŸ¥æ¨è
        List<DishScore> contextScores = contextAwareRecommendation(userProfile, context);
        
        // åŠ æƒèåˆ
        fusionScores.addAll(weightedFusion(cfScores, cbScores, popularScores, contextScores));
        
        return fusionScores;
    }
    
    /**
     * ååŒè¿‡æ»¤ç®—æ³•
     */
    private List<DishScore> collaborativeFiltering(UserProfile userProfile, ContextInfo context) {
        // åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤
        List<DishScore> userCF = userBasedCF(userProfile, context);
        
        // åŸºäºç‰©å“çš„ååŒè¿‡æ»¤
        List<DishScore> itemCF = itemBasedCF(userProfile, context);
        
        // æ··åˆååŒè¿‡æ»¤
        return hybridCF(userCF, itemCF);
    }
}
```text

### æˆæœ¬è®¡ç®—å¼•æ“

```java
@Service
public class IntelligentCostCalculator {
    
    @Autowired
    private CostDataService costDataService;
    
    @Autowired
    private AllocationRuleService allocationRuleService;
    
    @Autowired
    private PredictionModelService predictionModelService;
    
    /**
     * å®æ—¶æˆæœ¬è®¡ç®—
     */
    public RealTimeCostDTO calculateRealTimeCost(String costObjectType, String costObjectId) {
        // 1. è·å–ç›´æ¥æˆæœ¬
        Map<String, BigDecimal> directCosts = calculateDirectCosts(costObjectType, costObjectId);
        
        // 2. åˆ†é…é—´æ¥æˆæœ¬
        Map<String, BigDecimal> indirectCosts = allocateIndirectCosts(costObjectType, costObjectId);
        
        // 3. è®¡ç®—æ€»æˆæœ¬
        BigDecimal totalCost = calculateTotalCost(directCosts, indirectCosts);
        
        // 4. æˆæœ¬æ„æˆåˆ†æ
        List<CostCompositionDTO> composition = analyzeCostComposition(directCosts, indirectCosts);
        
        // 5. æˆæœ¬è¶‹åŠ¿åˆ†æ
        CostTrendDTO trend = analyzeCostTrend(costObjectType, costObjectId);
        
        return buildRealTimeCostDTO(directCosts, indirectCosts, totalCost, composition, trend);
    }
    
    /**
     * ABCæˆæœ¬æ³•åˆ†é…
     */
    private Map<String, BigDecimal> allocateCostsByABC(CostAllocationContext context) {
        Map<String, BigDecimal> allocatedCosts = new HashMap<>();
        
        // è¯†åˆ«ä½œä¸šæ´»åŠ¨
        List<Activity> activities = identifyActivities(context);
        
        // ç¡®å®šæˆæœ¬åŠ¨å› 
        Map<Activity, CostDriver> costDrivers = determineCostDrivers(activities);
        
        // è®¡ç®—ä½œä¸šæˆæœ¬ç‡
        Map<Activity, BigDecimal> activityRates = calculateActivityRates(activities, costDrivers);
        
        // åˆ†é…æˆæœ¬åˆ°æˆæœ¬å¯¹è±¡
        for (CostObject costObject : context.getCostObjects()) {
            BigDecimal objectCost = BigDecimal.ZERO;
            
            for (Activity activity : activities) {
                BigDecimal driverQuantity = getDriverQuantity(costObject, activity, costDrivers.get(activity));
                BigDecimal activityCost = activityRates.get(activity).multiply(driverQuantity);
                objectCost = objectCost.add(activityCost);
            }
            
            allocatedCosts.put(costObject.getId(), objectCost);
        }
        
        return allocatedCosts;
    }
    
    /**
     * æˆæœ¬é¢„æµ‹
     */
    public CostPredictionDTO predictCost(String costItemId, LocalDate targetDate) {
        // 1. è·å–å†å²æ•°æ®
        List<HistoricalCostData> historicalData = costDataService.getHistoricalCostData(costItemId);
        
        // 2. ç‰¹å¾å·¥ç¨‹
        List<CostFeature> features = extractFeatures(historicalData);
        
        // 3. å¤šæ¨¡å‹é¢„æµ‹
        Map<String, BigDecimal> modelPredictions = multiModelPrediction(features, targetDate);
        
        // 4. æ¨¡å‹èåˆ
        BigDecimal finalPrediction = modelFusion(modelPredictions);
        
        // 5. ç½®ä¿¡åŒºé—´è®¡ç®—
        ConfidenceInterval confidenceInterval = calculateConfidenceInterval(modelPredictions);
        
        // 6. é£é™©è¯„ä¼°
        RiskAssessment riskAssessment = assessPredictionRisk(finalPrediction, confidenceInterval);
        
        return buildCostPredictionDTO(finalPrediction, confidenceInterval, riskAssessment, modelPredictions);
    }
}
```text

### åº“å­˜ä¼˜åŒ–ç®—æ³•

```java
@Service
public class InventoryOptimizationEngine {
    
    @Autowired
    private DemandForecastService demandForecastService;
    
    @Autowired
    private SupplierService supplierService;
    
    @Autowired
    private CostService costService;
    
    /**
     * åº“å­˜ä¼˜åŒ–
     */
    public InventoryOptimizationResult optimizeInventory(InventoryOptimizationContext context) {
        // 1. éœ€æ±‚é¢„æµ‹
        DemandForecast demandForecast = demandForecastService.forecast(context);
        
        // 2. å®‰å…¨åº“å­˜è®¡ç®—
        Map<String, BigDecimal> safetyStocks = calculateSafetyStocks(demandForecast, context);
        
        // 3. å†è®¢è´§ç‚¹è®¡ç®—
        Map<String, BigDecimal> reorderPoints = calculateReorderPoints(demandForecast, safetyStocks, context);
        
        // 4. ç»æµè®¢å•æ‰¹é‡è®¡ç®—
        Map<String, EconomicOrderQuantity> eoqMap = calculateEOQ(demandForecast, context);
        
        // 5. æœåŠ¡æ°´å¹³ä¼˜åŒ–
        ServiceLevelOptimization serviceLevelOpt = optimizeServiceLevel(demandForecast, context);
        
        // 6. åº“å­˜ç­–ç•¥åˆ¶å®š
        InventoryStrategy strategy = developInventoryStrategy(
            demandForecast, safetyStocks, reorderPoints, eoqMap, serviceLevelOpt, context);
        
        return buildOptimizationResult(strategy, demandForecast, safetyStocks, reorderPoints, eoqMap, serviceLevelOpt);
    }
    
    /**
     * å®‰å…¨åº“å­˜è®¡ç®—
     */
    private Map<String, BigDecimal> calculateSafetyStocks(DemandForecast forecast, 
                                                         InventoryOptimizationContext context) {
        Map<String, BigDecimal> safetyStocks = new HashMap<>();
        
        for (String materialId : forecast.getMaterialDemands().keySet()) {
            MaterialDemand demand = forecast.getMaterialDemands().get(materialId);
            
            // è®¡ç®—éœ€æ±‚æ ‡å‡†å·®
            BigDecimal demandStd = calculateDemandStandardDeviation(demand);
            
            // è·å–æå‰æœŸ
            LeadTime leadTime = getLeadTime(materialId, context);
            
            // è®¡ç®—æå‰æœŸæ ‡å‡†å·®
            BigDecimal leadTimeStd = calculateLeadTimeStandardDeviation(leadTime);
            
            // è®¡ç®—å®‰å…¨åº“å­˜ï¼ˆè€ƒè™‘éœ€æ±‚ä¸ç¡®å®šæ€§å’Œæå‰æœŸä¸ç¡®å®šæ€§ï¼‰
            BigDecimal safetyStock = calculateSafetyStock(
                demandStd, leadTimeStd, context.getServiceLevel(), leadTime.getAverage());
            
            safetyStocks.put(materialId, safetyStock);
        }
        
        return safetyStocks;
    }
    
    /**
     * ç»æµè®¢å•æ‰¹é‡è®¡ç®—
     */
    private EconomicOrderQuantity calculateEOQForMaterial(String materialId, 
                                                         MaterialDemand demand,
                                                         InventoryOptimizationContext context) {
        // è·å–è®¢è´­æˆæœ¬
        BigDecimal orderingCost = getOrderingCost(materialId, context);
        
        // è·å–æŒæœ‰æˆæœ¬ç‡
        BigDecimal holdingCostRate = getHoldingCostRate(materialId, context);
        
        // è·å–ç‰©æ–™å•ä»·
        BigDecimal unitPrice = getUnitPrice(materialId, context);
        
        // è®¡ç®—EOQ
        BigDecimal eoq = calculateClassicEOQ(demand.getAnnualQuantity(), orderingCost, 
                                           unitPrice, holdingCostRate);
        
        // è€ƒè™‘æ•°é‡æŠ˜æ‰£
        eoq = adjustForQuantityDiscounts(eoq, materialId, demand.getAnnualQuantity());
        
        // è€ƒè™‘ä»“å‚¨çº¦æŸ
        eoq = adjustForStorageConstraints(eoq, materialId, context);
        
        return new EconomicOrderQuantity(materialId, eoq, orderingCost, 
                                       unitPrice.multiply(holdingCostRate));
    }
}
```text

---

## ğŸ”§ å¼€å‘å·¥å…·ä¸é…ç½®

### å¼€å‘ç¯å¢ƒé…ç½®

```yaml
# application-dev.yml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/smart_restaurant_dev
    username: dev_user
    password: dev_password
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
  
  redis:
    host: localhost
    port: 6379
    password: 
    database: 0
  
  elasticsearch:
    uris: http://localhost:9200
  
  kafka:
    bootstrap-servers: localhost:9092

# å¾®æœåŠ¡é…ç½®
eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/
  instance:
    prefer-ip-address: true

# æ—¥å¿—é…ç½®
logging:
  level:
    com.smartrestaurant: DEBUG
    org.springframework.web: INFO
  file:
    name: logs/application-dev.log
  pattern:
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
```text

### Dockerå¼€å‘ç¯å¢ƒ

```dockerfile
# åç«¯æœåŠ¡Dockerfile
FROM openjdk:17-jdk-slim

# å®‰è£…å¿…è¦çš„å·¥å…·
RUN apt-get update && apt-get install -y \
    curl \
    && rm -rf /var/lib/apt/lists/*

# åˆ›å»ºåº”ç”¨ç›®å½•
WORKDIR /app

# å¤åˆ¶JARæ–‡ä»¶
COPY target/smart-restaurant-service.jar app.jar

# åˆ›å»ºérootç”¨æˆ·
RUN groupadd -r appuser && useradd -r -g appuser appuser
RUN chown -R appuser:appuser /app
USER appuser

# æš´éœ²ç«¯å£
EXPOSE 8080

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:8080/actuator/health || exit 1

# å¯åŠ¨åº”ç”¨
ENTRYPOINT ["java", "-jar", "app.jar"]
```text

```yaml
# docker-compose-dev.yml
version: '3.8'

services:
  # æ•°æ®åº“
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: smart_restaurant_dev
      POSTGRES_USER: dev_user
      POSTGRES_PASSWORD: dev_password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./sql/init:/docker-entrypoint-initdb.d

  # Redis
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes

  # Elasticsearch
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.7.0
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
    ports:
      - "9200:9200"
    volumes:
      - elasticsearch_data:/usr/share/elasticsearch/data

  # Kafka
  zookeeper:
    image: confluentinc/cp-zookeeper:7.3.0
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181

  kafka:
    image: confluentinc/cp-kafka:7.3.0
    depends_on:
      - zookeeper
    environment:
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://localhost:9092
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
    ports:
      - "9092:9092"

volumes:
  postgres_data:
  elasticsearch_data:
```text

---

## ğŸ“Š ç›‘æ§ä¸è¿ç»´

### åº”ç”¨ç›‘æ§é…ç½®

```yaml
# Prometheusé…ç½®
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'smart-restaurant-services'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['user-service:8080', 'menu-service:8080', 'inventory-service:8080']
        labels:
          group: 'backend-services'
  
  - job_name: 'frontend-services'
    static_configs:
      - targets: ['web-app:80']
        labels:
          group: 'frontend-services'

# Grafanaä»ªè¡¨æ¿é…ç½®
- name: 'ä¸šåŠ¡ç›‘æ§'
  panels:
    - title: 'è®¢å•é‡ç›‘æ§'
      type: 'graph'
      targets:
        - expr: 'sum(rate(order_created_total[5m]))'
          legendFormat: 'è®¢å•åˆ›å»ºé€Ÿç‡'
    
    - title: 'æˆæœ¬ç›‘æ§'
      type: 'graph'
      targets:
        - expr: 'cost_total'
          legendFormat: 'æ€»æˆæœ¬'

# å‘Šè­¦è§„åˆ™
groups:
- name: business_alerts
  rules:
  - alert: HighOrderFailureRate
    expr: rate(order_failed_total[5m]) > 0.05
    for: 2m
    labels:
      severity: warning
    annotations:
      summary: "è®¢å•å¤±è´¥ç‡è¿‡é«˜"
      description: "è®¢å•å¤±è´¥ç‡å·²ç»è¶…è¿‡5%ï¼Œå½“å‰å€¼ä¸º {{ $value }}"
```text

---

## ğŸš€ éƒ¨ç½²ä¸å‘å¸ƒ

### Kuberneteséƒ¨ç½²é…ç½®

```yaml
# menu-service-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: menu-service
  labels:
    app: menu-service
    version: v1.0.0
spec:
  replicas: 3
  selector:
    matchLabels:
      app: menu-service
  template:
    metadata:
      labels:
        app: menu-service
        version: v1.0.0
    spec:
      containers:
      - name: menu-service
        image: registry.example.com/smart-restaurant/menu-service:v1.0.0
        ports:
        - containerPort: 8080
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "prod"
        - name: EUREKA_SERVER
          value: "http://eureka-server:8761/eureka"
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "1Gi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /actuator/health
            port: 8080
          initialDelaySeconds: 60
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /actuator/health/readiness
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 5
---
apiVersion: v1
kind: Service
metadata:
  name: menu-service
spec:
  selector:
    app: menu-service
  ports:
  - port: 8080
    targetPort: 8080
  type: ClusterIP
```text

---

## ğŸ’¡ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒç¤ºä¾‹

```java
/**
 * æ™ºèƒ½èœå•æœåŠ¡å®ç°
 * 
 * @author Smart Restaurant Team
 * @version 1.0
 * @since 2024
 */
@Service
@Slf4j
@Validated
public class MenuServiceImpl implements MenuService {
    
    private final MenuRepository menuRepository;
    private final DishRepository dishRepository;
    private final RecommendationEngine recommendationEngine;
    
    /**
     * æ„é€ å‡½æ•°ä¾èµ–æ³¨å…¥
     */
    @Autowired
    public MenuServiceImpl(MenuRepository menuRepository,
                          DishRepository dishRepository,
                          RecommendationEngine recommendationEngine) {
        this.menuRepository = menuRepository;
        this.dishRepository = dishRepository;
        this.recommendationEngine = recommendationEngine;
    }
    
    /**
     * ç”ŸæˆåŠ¨æ€èœå•
     * 
     * @param restaurantId é¤å…ID
     * @param userId ç”¨æˆ·IDï¼ˆå¯é€‰ï¼‰
     * @param context ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
     * @return åŠ¨æ€èœå•DTO
     * @throws BusinessException ä¸šåŠ¡å¼‚å¸¸
     */
    @Override
    @Transactional(readOnly = true)
    public DynamicMenuDTO generateDynamicMenu(@NotBlank String restaurantId, 
                                             String userId, 
                                             String context) {
        try {
            log.info("å¼€å§‹ç”ŸæˆåŠ¨æ€èœå•, restaurantId: {}, userId: {}", restaurantId, userId);
            
            // å‚æ•°æ ¡éªŒ
            validateParameters(restaurantId);
            
            // è·å–åŸºç¡€èœå•
            Menu baseMenu = getBaseMenu(restaurantId);
            
            // ç”Ÿæˆä¸ªæ€§åŒ–æ¨è
            List<DishRecommendationDTO> recommendations = 
                generateRecommendations(baseMenu, userId, context);
            
            // æ„å»ºåŠ¨æ€èœå•
            DynamicMenuDTO dynamicMenu = buildDynamicMenu(baseMenu, recommendations);
            
            log.info("åŠ¨æ€èœå•ç”ŸæˆæˆåŠŸ, menuId: {}", dynamicMenu.getMenuId());
            return dynamicMenu;
            
        } catch (Exception e) {
            log.error("ç”ŸæˆåŠ¨æ€èœå•å¤±è´¥, restaurantId: {}, error: {}", restaurantId, e.getMessage(), e);
            throw new BusinessException("MENU_GENERATION_FAILED", "èœå•ç”Ÿæˆå¤±è´¥");
        }
    }
    
    /**
     * å‚æ•°æ ¡éªŒ
     */
    private void validateParameters(String restaurantId) {
        if (StringUtils.isBlank(restaurantId)) {
            throw new IllegalArgumentException("é¤å…IDä¸èƒ½ä¸ºç©º");
        }
    }
}
```text

---

## ğŸ¯ æ€»ç»“

è¿™ä»½å…¨é‡å¼€å‘è€…æ–‡æ¡£æä¾›äº†æ™ºèƒ½é¤é¥®ç³»ç»Ÿçš„å®Œæ•´æŠ€æœ¯æŒ‡å¯¼ï¼ŒåŒ…æ‹¬ï¼š

### ğŸ“‹ æ–‡æ¡£å®Œæ•´æ€§

- **é¡¹ç›®æ¦‚è§ˆ**: ä¸šåŠ¡ç›®æ ‡å’ŒæŠ€æœ¯æ„¿æ™¯
- **æ¶æ„è®¾è®¡**: ä»å®è§‚åˆ°å¾®è§‚çš„æŠ€æœ¯æ¶æ„
- **æ•°æ®åº“è®¾è®¡**: å®Œæ•´çš„è¡¨ç»“æ„å’Œå…³ç³»è®¾è®¡
- **APIè§„èŒƒ**: è¯¦ç»†çš„æ¥å£å®šä¹‰å’Œä½¿ç”¨ç¤ºä¾‹
- **æ ¸å¿ƒå®ç°**: å…³é”®ä¸šåŠ¡é€»è¾‘çš„ä»£ç å®ç°
- **éƒ¨ç½²è¿ç»´**: å®Œæ•´çš„è¿ç»´å’Œç›‘æ§æ–¹æ¡ˆ

### ğŸ”§ æŠ€æœ¯å…¨é¢æ€§

- **å‰ç«¯æŠ€æœ¯**: Vue 3 + TypeScriptç°ä»£åŒ–æŠ€æœ¯æ ˆ
- **åç«¯æ¶æ„**: Spring Cloudå¾®æœåŠ¡æ¶æ„
- **æ•°æ®å­˜å‚¨**: å¤šæ¨¡æ•°æ®åº“è®¾è®¡æ–¹æ¡ˆ
- **AIé›†æˆ**: æ™ºèƒ½æ¨èå’Œé¢„æµ‹ç®—æ³•
- **DevOps**: å®Œæ•´çš„CI/CDå’Œç›‘æ§ä½“ç³»

### ğŸš€ å¯å®æ–½æ€§

- **è¯¦ç»†ä»£ç ç¤ºä¾‹**: æä¾›å¯ç›´æ¥å‚è€ƒçš„ä»£ç å®ç°
- **é…ç½®æ¨¡æ¿**: å®Œæ•´çš„é…ç½®æ–‡ä»¶ç¤ºä¾‹
- **éƒ¨ç½²è„šæœ¬**: å®¹å™¨åŒ–å’Œäº‘åŸç”Ÿéƒ¨ç½²æ–¹æ¡ˆ
- **å¼€å‘å·¥å…·**: å®Œæ•´çš„å¼€å‘ç¯å¢ƒé…ç½®

### ğŸ“ˆ æ‰©å±•æ€§è®¾è®¡

- **æ¨¡å—åŒ–è®¾è®¡**: å„æœåŠ¡ç‹¬ç«‹å¼€å‘éƒ¨ç½²
- **APIé©±åŠ¨**: æ¸…æ™°çš„æ¥å£å¥‘çº¦
- **æ•°æ®æ¨¡å‹æ‰©å±•**: æ”¯æŒä¸šåŠ¡æ¼”è¿›çš„æ•°æ®ç»“æ„
- **ç›‘æ§å¯è§‚æµ‹**: å…¨é¢çš„ç›‘æ§å’Œæ—¥å¿—ä½“ç³»

è¿™ä»½æ–‡æ¡£ä¸ºå¼€å‘å›¢é˜Ÿæä¾›äº†ä»é›¶å¼€å§‹æ„å»ºæ™ºèƒ½é¤é¥®ç³»ç»Ÿçš„å®Œæ•´æŒ‡å—ï¼Œç¡®ä¿é¡¹ç›®èƒ½å¤Ÿé«˜æ•ˆã€é«˜è´¨é‡åœ°å®æ–½å’Œäº¤ä»˜ã€‚

---

**ç«‹å³å¼€å§‹æ‚¨çš„æ™ºèƒ½é¤é¥®ç³»ç»Ÿå¼€å‘ä¹‹æ—…ï¼** ğŸš€

å¦‚éœ€ä»»ä½•ç‰¹å®šæ¨¡å—çš„æ·±å…¥æŒ‡å¯¼ï¼Œè¯·éšæ—¶æå‡ºï¼Œæˆ‘å°†ä¸ºæ‚¨æä¾›æ›´è¯¦ç»†çš„æŠ€æœ¯æ”¯æŒã€‚


