# YYCÂ³æ™ºèƒ½AIæµ®çª—ç³»ç»Ÿ - å®Œæ•´éƒ¨ç½²æŒ‡å—

> åŸºäºã€Š02-æ™ºèƒ½æ’æ‹”å¼å¯ç§»åŠ¨AIæ‰§è¡Œæ–¹æ¡ˆ.mdã€‹çš„æ·±åº¦æ¶æ„å®ç°

## ğŸ“‹ ç›®å½•

- [ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ](#ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ)
- [éƒ¨ç½²å‰å‡†å¤‡](#éƒ¨ç½²å‰å‡†å¤‡)
- [å¿«é€Ÿéƒ¨ç½²](#å¿«é€Ÿéƒ¨ç½²)
- [ç»„ä»¶è¯´æ˜](#ç»„ä»¶è¯´æ˜)
- [é…ç½®è¯¦è§£](#é…ç½®è¯¦è§£)
- [ç›‘æ§å’Œè¿ç»´](#ç›‘æ§å’Œè¿ç»´)
- [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [å®‰å…¨åŠ å›º](#å®‰å…¨åŠ å›º)

---

## ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·è®¿é—®å±‚                                â”‚
â”‚                    Frontend (Next.js)                            â”‚
â”‚                   http://localhost:3200                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       APIç½‘å…³å±‚                                   â”‚
â”‚                    Nginx (è´Ÿè½½å‡è¡¡)                               â”‚
â”‚                   http://localhost:8080                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚            â”‚            â”‚            â”‚
         â–¼            â–¼            â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚è‡ªæ²»AIå¼•æ“  â”‚ â”‚æ¨¡å‹é€‚é…å™¨  â”‚ â”‚å­¦ä¹ ç³»ç»Ÿ    â”‚ â”‚ç›®æ ‡ç®¡ç†    â”‚
â”‚ :3000      â”‚ â”‚ :3001      â”‚ â”‚ :3002      â”‚ â”‚ :3003      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚              â”‚              â”‚              â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚              â”‚
              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ•°æ®å­˜å‚¨å±‚      â”‚  â”‚    ç›‘æ§å±‚        â”‚
â”‚                  â”‚  â”‚                  â”‚
â”‚  Redis :6379     â”‚  â”‚  Prometheus      â”‚
â”‚  MongoDB :27017  â”‚  â”‚  :9090           â”‚
â”‚  PostgreSQL      â”‚  â”‚                  â”‚
â”‚  :5432           â”‚  â”‚  Grafana :3100   â”‚
â”‚                  â”‚  â”‚                  â”‚
â”‚                  â”‚  â”‚  Jaeger :16686   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                  â”‚
                      â”‚  Kibana :5601    â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | ç«¯å£ | èŒè´£ | å®ç°æ–‡æ¡£ |
|------|------|------|----------|
| å‰ç«¯åº”ç”¨ | 3200 | ç”¨æˆ·ç•Œé¢ | Next.js 14 |
| APIç½‘å…³ | 8080 | è¯·æ±‚è·¯ç”±ã€è´Ÿè½½å‡è¡¡ | Nginx |
| è‡ªæ²»AIå¼•æ“ | 3000 | æ ¸å¿ƒAIé€»è¾‘ã€ä»»åŠ¡è°ƒåº¦ | AutonomousAIEngine.ts |
| æ¨¡å‹é€‚é…å™¨ | 3001 | å¤šæ¨¡å‹ç»Ÿä¸€æ¥å£ | ModelAdapterç³»ç»Ÿ |
| å­¦ä¹ ç³»ç»Ÿ | 3002 | æ™ºèƒ½å­¦ä¹ ã€ä¼˜åŒ– | UnifiedLearningSystem.ts |
| ç›®æ ‡ç®¡ç† | 3003 | OKRç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸ | EnhancedGoalManagement.ts |
| Redis | 6379 | ç¼“å­˜ã€ä¼šè¯ | - |
| MongoDB | 27017 | æ–‡æ¡£å­˜å‚¨ | - |
| PostgreSQL | 5432 | å…³ç³»æ•°æ® | - |
| Prometheus | 9090 | æŒ‡æ ‡é‡‡é›† | - |
| Grafana | 3100 | å¯è§†åŒ–ç›‘æ§ | - |
| Jaeger | 16686 | åˆ†å¸ƒå¼è¿½è¸ª | - |

---

## éƒ¨ç½²å‰å‡†å¤‡

### 1. ç³»ç»Ÿè¦æ±‚

**æœ€ä½é…ç½®**

- CPU: 4æ ¸å¿ƒ
- å†…å­˜: 8GB RAM
- ç£ç›˜: 50GB å¯ç”¨ç©ºé—´
- ç³»ç»Ÿ: Linux/macOS/Windows with WSL2

**æ¨èé…ç½®**

- CPU: 8æ ¸å¿ƒ+
- å†…å­˜: 16GB+ RAM
- ç£ç›˜: 100GB+ SSD
- ç½‘ç»œ: ç¨³å®šçš„äº’è”ç½‘è¿æ¥ï¼ˆç”¨äºAIæ¨¡å‹APIï¼‰

### 2. è½¯ä»¶ä¾èµ–

```bash
# Dockerå’ŒDocker Compose
docker --version        # >= 20.10
docker-compose --version # >= 2.0

# Node.jsï¼ˆæœ¬åœ°å¼€å‘ï¼‰
node --version          # >= 18.0

# Git
git --version           # >= 2.30

# å¯é€‰ï¼šæ€§èƒ½æµ‹è¯•å·¥å…·
hey --version           # HTTPè´Ÿè½½æµ‹è¯•
ab --version            # Apache Bench
```

### 3. ç¯å¢ƒé…ç½®æ–‡ä»¶

åˆ›å»º `.env.production` æ–‡ä»¶ï¼š

```bash
# æ•°æ®åº“å¯†ç 
MONGO_PASSWORD=your_secure_mongo_password_here
DB_PASSWORD=your_secure_postgres_password_here
REDIS_PASSWORD=your_secure_redis_password_here

# AIæ¨¡å‹APIå¯†é’¥
OPENAI_API_KEY=sk-your-openai-api-key-here
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# ç›‘æ§å¯†ç 
GRAFANA_PASSWORD=your_secure_grafana_password

# åº”ç”¨é…ç½®
NODE_ENV=production
LOG_LEVEL=info
```

**å®‰å…¨æç¤º**ï¼š

- âš ï¸ **åˆ‡å‹¿æäº¤ `.env.production` åˆ°ç‰ˆæœ¬æ§åˆ¶**
- ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘16ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼‰
- å®šæœŸæ›´æ¢å¯†ç 
- ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡ï¼ˆå¦‚AWS Secrets Managerã€Azure Key Vaultï¼‰

---

## å¿«é€Ÿéƒ¨ç½²

### æ–¹æ¡ˆä¸€ï¼šè‡ªåŠ¨åŒ–è„šæœ¬éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†ä»“åº“
git clone <repository-url>
cd yyc3-mana

# 2. é…ç½®ç¯å¢ƒ
cp .env.example .env.production
nano .env.production  # å¡«å…¥çœŸå®é…ç½®

# 3. æ‰§è¡Œéƒ¨ç½²è„šæœ¬
chmod +x scripts/deploy-complete.sh
./scripts/deploy-complete.sh

# è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š
# âœ… ç¯å¢ƒæ£€æŸ¥
# âœ… Dockeré•œåƒæ„å»º
# âœ… åŸºç¡€è®¾æ–½å¯åŠ¨ï¼ˆæ•°æ®åº“ï¼‰
# âœ… æ ¸å¿ƒæœåŠ¡å¯åŠ¨
# âœ… å‰ç«¯å’Œç½‘å…³å¯åŠ¨
# âœ… ç›‘æ§æœåŠ¡å¯åŠ¨
# âœ… å¥åº·æ£€æŸ¥
# âœ… æ•°æ®åˆå§‹åŒ–
```

### æ–¹æ¡ˆäºŒï¼šæ‰‹åŠ¨åˆ†æ­¥éƒ¨ç½²

#### æ­¥éª¤1ï¼šå¯åŠ¨åŸºç¡€è®¾æ–½

```bash
# å¯åŠ¨æ•°æ®åº“æœåŠ¡
docker-compose -f docker-compose.complete.yml up -d redis mongo postgres

# ç­‰å¾…æœåŠ¡å°±ç»ª
sleep 20

# æ£€æŸ¥å¥åº·çŠ¶æ€
docker-compose -f docker-compose.complete.yml ps
```

#### æ­¥éª¤2ï¼šå¯åŠ¨æ ¸å¿ƒæœåŠ¡

```bash
# æ„å»ºé•œåƒï¼ˆå¦‚æœéœ€è¦ï¼‰
docker-compose -f docker-compose.complete.yml build

# å¯åŠ¨æ ¸å¿ƒæœåŠ¡
docker-compose -f docker-compose.complete.yml up -d \
    autonomous-engine \
    model-adapter \
    learning-system \
    goal-management

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.complete.yml logs -f autonomous-engine
```

#### æ­¥éª¤3ï¼šå¯åŠ¨å‰ç«¯å’Œç½‘å…³

```bash
# å¯åŠ¨å‰ç«¯å’ŒAPIç½‘å…³
docker-compose -f docker-compose.complete.yml up -d api-gateway frontend

# è®¿é—®åº”ç”¨
open http://localhost:3200
```

#### æ­¥éª¤4ï¼šå¯åŠ¨ç›‘æ§ï¼ˆå¯é€‰ï¼‰

```bash
# å¯åŠ¨å®Œæ•´ç›‘æ§æ ˆ
docker-compose -f docker-compose.complete.yml up -d \
    prometheus \
    grafana \
    jaeger \
    elasticsearch \
    kibana

# è®¿é—®ç›‘æ§é¢æ¿
open http://localhost:3100  # Grafana
open http://localhost:9090  # Prometheus
open http://localhost:16686 # Jaeger
```

---

## ç»„ä»¶è¯´æ˜

### 1. è‡ªæ²»AIå¼•æ“ (Autonomous Engine)

**èŒè´£**ï¼š

- æ¥æ”¶ç”¨æˆ·æ¶ˆæ¯å¹¶è§£ææ„å›¾
- åè°ƒå„å­ç³»ç»Ÿå®Œæˆä»»åŠ¡
- ç®¡ç†ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸ
- å®æ—¶äº‹ä»¶é©±åŠ¨å†³ç­–

**å…³é”®åŠŸèƒ½**ï¼š

```typescript
// æ ¸å¿ƒèƒ½åŠ›
- äº‹ä»¶é©±åŠ¨ + ç›®æ ‡é©±åŠ¨æ··åˆæ¶æ„
- MessageBusï¼šæ¶ˆæ¯æ€»çº¿ï¼Œå®ç°ç»„ä»¶è§£è€¦
- TaskSchedulerï¼šæ™ºèƒ½ä»»åŠ¡è°ƒåº¦å’Œä¼˜å…ˆçº§ç®¡ç†
- StateManagerï¼šçŠ¶æ€å¿«ç…§å’Œæ¢å¤
```

**å¥åº·æ£€æŸ¥**ï¼š

```bash
curl http://localhost:3000/health
# è¿”å›ï¼š{"status":"healthy","timestamp":"2024-01-15T10:00:00.000Z"}
```

**æŒ‡æ ‡ç›‘æ§**ï¼š

```
# PrometheusæŒ‡æ ‡
ai_engine_tasks_total           # æ€»ä»»åŠ¡æ•°
ai_engine_tasks_active          # æ´»è·ƒä»»åŠ¡æ•°
ai_engine_message_queue_size    # æ¶ˆæ¯é˜Ÿåˆ—é•¿åº¦
ai_engine_response_time_seconds # å“åº”æ—¶é—´
```

### 2. æ¨¡å‹é€‚é…å™¨ (Model Adapter)

**èŒè´£**ï¼š

- æä¾›ç»Ÿä¸€çš„AIæ¨¡å‹è°ƒç”¨æ¥å£
- æ”¯æŒå¤šç§æ¨¡å‹æä¾›å•†ï¼ˆOpenAIã€Anthropicã€æœ¬åœ°æ¨¡å‹ï¼‰
- æ™ºèƒ½ç¼“å­˜å’Œæµå¼å“åº”
- æ¨¡å‹å¥åº·æ£€æŸ¥å’Œæ•…éšœè½¬ç§»

**æ”¯æŒçš„æ¨¡å‹**ï¼š

- OpenAI: GPT-4, GPT-3.5-turbo
- Anthropic: Claude 3 Opus/Sonnet/Haiku
- Local: Qwen, GLM, Llama via Ollama

**é…ç½®ç¤ºä¾‹**ï¼š

```typescript
{
  provider: 'openai',
  model: 'gpt-4-turbo-preview',
  streaming: true,
  cacheEnabled: true,
  cacheTTL: 3600
}
```

**å¥åº·æ£€æŸ¥**ï¼š

```bash
curl http://localhost:3001/health
# æ£€æŸ¥æ‰€æœ‰å·²æ³¨å†Œæ¨¡å‹çš„å¥åº·çŠ¶æ€
```

### 3. å­¦ä¹ ç³»ç»Ÿ (Learning System)

**èŒè´£**ï¼š

- ä¸‰å±‚å­¦ä¹ æ¶æ„ï¼ˆè¡Œä¸ºå±‚ã€ç­–ç•¥å±‚ã€çŸ¥è¯†å±‚ï¼‰
- ç”¨æˆ·è¡Œä¸ºæ¨¡å¼è¯†åˆ«
- å†³ç­–ç­–ç•¥ä¼˜åŒ–
- çŸ¥è¯†å›¾è°±æ„å»ºå’ŒæŸ¥è¯¢

**å­¦ä¹ å±‚çº§**ï¼š

| å±‚çº§ | èŒè´£ | å­¦ä¹ å¯¹è±¡ | ä¼˜åŒ–ç›®æ ‡ |
|------|------|----------|----------|
| è¡Œä¸ºå±‚ | çŸ­æœŸé€‚åº” | ç”¨æˆ·ä¹ æƒ¯ | å“åº”é€Ÿåº¦ |
| ç­–ç•¥å±‚ | ä¸­æœŸä¼˜åŒ– | å†³ç­–ç­–ç•¥ | ä»»åŠ¡æˆåŠŸç‡ |
| çŸ¥è¯†å±‚ | é•¿æœŸç§¯ç´¯ | çŸ¥è¯†å›¾è°± | æ¨èå‡†ç¡®åº¦ |

**APIç¤ºä¾‹**ï¼š

```bash
# è®°å½•ç”¨æˆ·è¡Œä¸º
curl -X POST http://localhost:3002/api/learning/behavior \
  -H "Content-Type: application/json" \
  -d '{"userId":"user123","action":"task_completed","context":{}}'

# æŸ¥è¯¢æ¨è
curl http://localhost:3002/api/learning/recommendations?userId=user123
```

### 4. ç›®æ ‡ç®¡ç† (Goal Management)

**èŒè´£**ï¼š

- å®Œæ•´çš„ç›®æ ‡ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆ8é˜¶æ®µï¼‰
- SMARTç›®æ ‡éªŒè¯
- OKRå¯¹é½æ£€æŸ¥
- ä»»åŠ¡åˆ†è§£å’Œé‡Œç¨‹ç¢‘ç®¡ç†

**ç”Ÿå‘½å‘¨æœŸ**ï¼š

```
åˆ›å»º â†’ è§„åˆ’ â†’ æ‰§è¡Œ â†’ ç›‘æ§ â†’ è°ƒæ•´ â†’ å®Œæˆ â†’ è¯„ä¼° â†’ å­¦ä¹ 
```

**APIç¤ºä¾‹**ï¼š

```bash
# åˆ›å»ºç›®æ ‡
curl -X POST http://localhost:3003/api/goals \
  -H "Content-Type: application/json" \
  -d '{
    "title": "æå‡ç³»ç»Ÿæ€§èƒ½",
    "description": "ä¼˜åŒ–å“åº”æ—¶é—´è‡³2ç§’ä»¥å†…",
    "type": "performance",
    "objectives": [...]
  }'

# æ›´æ–°è¿›åº¦
curl -X PATCH http://localhost:3003/api/goals/goal-id/progress \
  -d '{"progress": 75, "healthScore": 85}'
```

---

## é…ç½®è¯¦è§£

### Nginx APIç½‘å…³é…ç½®

**é™æµé…ç½®**ï¼š

```nginx
# æ™®é€šAPIé™æµï¼š100 req/s
limit_req_zone $binary_remote_addr zone=api_limit:10m rate=100r/s;

# AIæ¨¡å‹é™æµï¼š10 req/sï¼ˆè€ƒè™‘æˆæœ¬ï¼‰
limit_req_zone $binary_remote_addr zone=model_limit:10m rate=10r/s;

# è¿æ¥æ•°é™åˆ¶
limit_conn_zone $binary_remote_addr zone=conn_limit:10m;
```

**è·¯ç”±è§„åˆ™**ï¼š

```nginx
/api/engine/   â†’ autonomous-engine:3000
/api/models/   â†’ model-adapter:3001
/api/learning/ â†’ learning-system:3002
/api/goals/    â†’ goal-management:3003
/ws/engine     â†’ WebSocketè¿æ¥
```

**å¥åº·æ£€æŸ¥**ï¼š

```bash
curl http://localhost:8080/health
# è¿”å›ç½‘å…³è‡ªèº«å¥åº·çŠ¶æ€
```

### Prometheusç›‘æ§é…ç½®

**æŠ“å–é—´éš”**ï¼š

- æ ¸å¿ƒæœåŠ¡ï¼š10ç§’
- æ•°æ®åº“ï¼š15ç§’
- å‰ç«¯ï¼š30ç§’

**æŒ‡æ ‡ä¿ç•™**ï¼š

- æœ¬åœ°å­˜å‚¨ï¼š30å¤©
- å¯é…ç½®è¿œç¨‹å†™å…¥ï¼ˆCortex/Thanosï¼‰å®ç°é•¿æœŸå­˜å‚¨

**å‘Šè­¦è§„åˆ™**ï¼ˆå¾…é…ç½®ï¼‰ï¼š

```yaml
# ç¤ºä¾‹ï¼šé«˜é”™è¯¯ç‡å‘Šè­¦
- alert: HighErrorRate
  expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
  for: 5m
  annotations:
    summary: "æœåŠ¡ {{ $labels.service }} é”™è¯¯ç‡è¿‡é«˜"
```

### Dockerèµ„æºé™åˆ¶

| æœåŠ¡ | CPUé™åˆ¶ | å†…å­˜é™åˆ¶ | CPUä¿ç•™ | å†…å­˜ä¿ç•™ |
|------|---------|----------|---------|----------|
| autonomous-engine | 2æ ¸ | 2GB | 1æ ¸ | 1GB |
| model-adapter | 1æ ¸ | 4GB | 0.5æ ¸ | 2GB |
| learning-system | 4æ ¸ | 8GB | 2æ ¸ | 4GB |
| goal-management | 1æ ¸ | 2GB | - | - |
| frontend | 1æ ¸ | 1GB | - | - |
| redis | 0.5æ ¸ | 2GB | - | - |
| mongo | 2æ ¸ | 4GB | - | - |
| postgres | 1æ ¸ | 2GB | - | - |

---

## ç›‘æ§å’Œè¿ç»´

### è®¿é—®ç›‘æ§é¢æ¿

#### 1. Grafanaä»ªè¡¨æ¿

```bash
URL: http://localhost:3100
ç”¨æˆ·å: admin
å¯†ç : <GRAFANA_PASSWORD>
```

**é¢„é…ç½®ä»ªè¡¨æ¿**ï¼š

- ç³»ç»Ÿæ¦‚è§ˆï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œ
- åº”ç”¨æŒ‡æ ‡ï¼šè¯·æ±‚é‡ã€å“åº”æ—¶é—´ã€é”™è¯¯ç‡
- AIæ¨¡å‹æ€§èƒ½ï¼šè°ƒç”¨æ¬¡æ•°ã€å¹³å‡å»¶è¿Ÿã€æˆåŠŸç‡
- æ•°æ®åº“ç›‘æ§ï¼šè¿æ¥æ•°ã€æŸ¥è¯¢æ€§èƒ½ã€ç¼“å­˜å‘½ä¸­ç‡

#### 2. PrometheusæŸ¥è¯¢

```bash
URL: http://localhost:9090

# å¸¸ç”¨æŸ¥è¯¢
rate(http_requests_total[5m])          # è¯·æ±‚ç‡
histogram_quantile(0.95, ...)           # P95å“åº”æ—¶é—´
up{job="autonomous-engine"}             # æœåŠ¡çŠ¶æ€
```

#### 3. Jaegeråˆ†å¸ƒå¼è¿½è¸ª

```bash
URL: http://localhost:16686

# è¿½è¸ªå®Œæ•´è¯·æ±‚é“¾è·¯
ç”¨æˆ·è¯·æ±‚ â†’ APIç½‘å…³ â†’ è‡ªæ²»å¼•æ“ â†’ æ¨¡å‹é€‚é…å™¨ â†’ å­¦ä¹ ç³»ç»Ÿ
```

#### 4. Kibanaæ—¥å¿—æŸ¥è¯¢

```bash
URL: http://localhost:5601

# åˆ›å»ºç´¢å¼•æ¨¡å¼
ç³»ç»Ÿæ—¥å¿—: system-logs-*
åº”ç”¨æ—¥å¿—: app-logs-*
è®¿é—®æ—¥å¿—: access-logs-*
```

### å¸¸ç”¨è¿ç»´å‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.complete.yml ps

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker-compose -f docker-compose.complete.yml logs -f <service-name>

# é‡å¯å•ä¸ªæœåŠ¡
docker-compose -f docker-compose.complete.yml restart autonomous-engine

# æ‰©å®¹æœåŠ¡ï¼ˆä»¥æ¨¡å‹é€‚é…å™¨ä¸ºä¾‹ï¼‰
docker-compose -f docker-compose.complete.yml up -d --scale model-adapter=5

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker-compose -f docker-compose.complete.yml exec autonomous-engine sh

# å¤‡ä»½æ•°æ®åº“
docker-compose -f docker-compose.complete.yml exec mongo mongodump --out /backup
docker-compose -f docker-compose.complete.yml exec postgres pg_dump yyc3 > backup.sql

# æ¸…ç†æœªä½¿ç”¨èµ„æº
docker system prune -a --volumes
```

---

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. æœåŠ¡æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**ï¼š`docker-compose up` å¤±è´¥æˆ–æœåŠ¡ä¸æ–­é‡å¯

**æ’æŸ¥æ­¥éª¤**ï¼š

```bash
# 1. æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.complete.yml logs <service-name>

# 2. æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000  # macOS/Linux
netstat -ano | findstr :3000  # Windows

# 3. æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# 4. æ£€æŸ¥å†…å­˜
free -m  # Linux
vm_stat  # macOS

# 5. éªŒè¯é…ç½®æ–‡ä»¶
docker-compose -f docker-compose.complete.yml config
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

- é‡Šæ”¾å ç”¨ç«¯å£æˆ–ä¿®æ”¹é…ç½®æ–‡ä»¶ç«¯å£
- æ¸…ç†ç£ç›˜ç©ºé—´
- å¢åŠ Dockerå†…å­˜é™åˆ¶

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶**ï¼šåº”ç”¨æ—¥å¿—æ˜¾ç¤º `Connection refused` æˆ– `ECONNREFUSED`

**æ’æŸ¥æ­¥éª¤**ï¼š

```bash
# 1. æ£€æŸ¥æ•°æ®åº“æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.complete.yml ps redis mongo postgres

# 2. æµ‹è¯•æ•°æ®åº“è¿æ¥
docker-compose -f docker-compose.complete.yml exec redis redis-cli ping
docker-compose -f docker-compose.complete.yml exec mongo mongosh --eval "db.runCommand({ping:1})"
docker-compose -f docker-compose.complete.yml exec postgres psql -U postgres -c "SELECT 1"

# 3. æ£€æŸ¥ç½‘ç»œ
docker network inspect yyc3-mana_yyc3-network
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

- ç­‰å¾…æ•°æ®åº“å®Œå…¨å¯åŠ¨ï¼ˆå¯èƒ½éœ€è¦20-30ç§’ï¼‰
- æ£€æŸ¥ `.env.production` ä¸­çš„å¯†ç é…ç½®
- é‡å¯æ•°æ®åº“æœåŠ¡

#### 3. AIæ¨¡å‹è°ƒç”¨å¤±è´¥

**ç—‡çŠ¶**ï¼šæ¨¡å‹é€‚é…å™¨è¿”å› `API key invalid` æˆ– `Rate limit exceeded`

**æ’æŸ¥æ­¥éª¤**ï¼š

```bash
# 1. éªŒè¯APIå¯†é’¥
curl http://localhost:3001/health
# æŸ¥çœ‹å“ªäº›æ¨¡å‹ä¸å¥åº·

# 2. æ£€æŸ¥ç¯å¢ƒå˜é‡
docker-compose -f docker-compose.complete.yml exec model-adapter env | grep API_KEY

# 3. æµ‹è¯•å¤–éƒ¨APIè¿é€šæ€§
curl https://api.openai.com/v1/models \
  -H "Authorization: Bearer $OPENAI_API_KEY"
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

- éªŒè¯ API å¯†é’¥æ­£ç¡®æ€§
- æ£€æŸ¥ API é¢åº¦å’Œé™æµ
- é…ç½®å¤‡ç”¨æ¨¡å‹

#### 4. å†…å­˜ä¸è¶³ (OOM)

**ç—‡çŠ¶**ï¼šæœåŠ¡è¢« Killedï¼Œæ—¥å¿—æ˜¾ç¤º `OOMKilled`

**æ’æŸ¥æ­¥éª¤**ï¼š

```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats --no-stream

# æŸ¥çœ‹ç³»ç»Ÿå†…å­˜
free -m
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# å¢åŠ æœåŠ¡å†…å­˜é™åˆ¶
# ç¼–è¾‘ docker-compose.complete.yml
services:
  autonomous-engine:
    deploy:
      resources:
        limits:
          memory: 4G  # ä»2Gå¢åŠ åˆ°4G
```

#### 5. ç½‘ç»œè¶…æ—¶

**ç—‡çŠ¶**ï¼šè¯·æ±‚è¶…æ—¶æˆ–ç½‘å…³è¿”å› `504 Gateway Timeout`

**æ’æŸ¥æ­¥éª¤**ï¼š

```bash
# 1. æ£€æŸ¥æœåŠ¡å“åº”æ—¶é—´
time curl http://localhost:3000/health

# 2. æŸ¥çœ‹Nginxæ—¥å¿—
docker-compose -f docker-compose.complete.yml logs api-gateway | grep "upstream timed out"

# 3. æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿ
docker-compose -f docker-compose.complete.yml exec frontend ping autonomous-engine
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

- å¢åŠ Nginxè¶…æ—¶é…ç½®
- ä¼˜åŒ–æ…¢æŸ¥è¯¢
- æ‰©å®¹æœåŠ¡å®ä¾‹

---

## æ€§èƒ½ä¼˜åŒ–

### 1. ç¼“å­˜ç­–ç•¥

**Redisç¼“å­˜é…ç½®**ï¼š

```bash
# æœ€å¤§å†…å­˜å’Œæ·˜æ±°ç­–ç•¥
maxmemory 2gb
maxmemory-policy allkeys-lru
```

**åº”ç”¨å±‚ç¼“å­˜**ï¼š

- AIå“åº”ç¼“å­˜ï¼š1å°æ—¶ TTL
- ç”¨æˆ·ä¼šè¯ï¼š30åˆ†é’Ÿ TTL
- é™æ€èµ„æºï¼š1å¹´ TTL

### 2. æ•°æ®åº“ä¼˜åŒ–

**MongoDBç´¢å¼•**ï¼š

```javascript
// å·²åˆ›å»ºç´¢å¼•
db.goals.createIndex({ userId: 1, status: 1 })
db.goals.createIndex({ 'title': 'text', 'description': 'text' })
db.ai_conversations.createIndex({ userId: 1, timestamp: -1 })
```

**PostgreSQLè°ƒä¼˜**ï¼š

```sql
-- å·²é…ç½®çš„æ‰©å±•
CREATE EXTENSION IF NOT EXISTS "pg_trgm";  -- æ¨¡ç³ŠæŸ¥è¯¢
CREATE EXTENSION IF NOT EXISTS "btree_gin";  -- å¤åˆç´¢å¼•
```

### 3. è´Ÿè½½å‡è¡¡

**æ¨ªå‘æ‰©å±•**ï¼š

```bash
# æ‰©å±•æ¨¡å‹é€‚é…å™¨åˆ°5ä¸ªå®ä¾‹
docker-compose -f docker-compose.complete.yml up -d --scale model-adapter=5

# Nginxä¼šè‡ªåŠ¨è´Ÿè½½å‡è¡¡
upstream model_adapter {
    least_conn;  # æœ€å°‘è¿æ¥ç®—æ³•
    server model-adapter:3001;
}
```

### 4. æ€§èƒ½åŸºå‡†æµ‹è¯•

```bash
# HTTPè´Ÿè½½æµ‹è¯•
hey -n 10000 -c 100 http://localhost:8080/api/engine/health

# ç»“æœç¤ºä¾‹
Summary:
  Total:        10.2341 secs
  Requests/sec: 977.13
  Average:      102.34 ms
  95th percentile: 250 ms
```

---

## å®‰å…¨åŠ å›º

### 1. ç½‘ç»œéš”ç¦»

```yaml
# ç”Ÿäº§ç¯å¢ƒé…ç½®
networks:
  frontend:
    driver: bridge
  backend:
    driver: bridge
    internal: true  # åç«¯ç½‘ç»œä¸æš´éœ²

services:
  frontend:
    networks:
      - frontend
  autonomous-engine:
    networks:
      - frontend
      - backend
  mongo:
    networks:
      - backend  # ä»…åç«¯å¯è®¿é—®
```

### 2. SSL/TLSé…ç½®

```nginx
# Nginx HTTPSé…ç½®
server {
    listen 443 ssl http2;
    server_name yourdomain.com;
    
    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    
    # HSTS
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
}
```

### 3. æ•°æ®åº“è®¿é—®æ§åˆ¶

```javascript
// MongoDBåˆ›å»ºåªè¯»ç”¨æˆ·
db.createUser({
  user: "readonly",
  pwd: "secure_password",
  roles: [{ role: "read", db: "yyc3" }]
})
```

### 4. å¯†é’¥ç®¡ç†

```bash
# ä½¿ç”¨Docker Secretsï¼ˆSwarmæ¨¡å¼ï¼‰
echo "my_api_key" | docker secret create openai_key -

# åœ¨æœåŠ¡ä¸­å¼•ç”¨
services:
  model-adapter:
    secrets:
      - openai_key
```

### 5. å®‰å…¨æ‰«æ

```bash
# Dockeré•œåƒå®‰å…¨æ‰«æ
docker scan yyc3-autonomous-engine

# ä¾èµ–æ¼æ´æ‰«æ
npm audit
npm audit fix
```

---

## é™„å½•

### A. ç¯å¢ƒå˜é‡å®Œæ•´åˆ—è¡¨

| å˜é‡å | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `NODE_ENV` | æ˜¯ | production | è¿è¡Œç¯å¢ƒ |
| `OPENAI_API_KEY` | å¦ | - | OpenAI APIå¯†é’¥ |
| `ANTHROPIC_API_KEY` | å¦ | - | Anthropic APIå¯†é’¥ |
| `MONGO_PASSWORD` | æ˜¯ | - | MongoDBå¯†ç  |
| `DB_PASSWORD` | æ˜¯ | - | PostgreSQLå¯†ç  |
| `REDIS_PASSWORD` | æ˜¯ | - | Rediså¯†ç  |
| `GRAFANA_PASSWORD` | æ˜¯ | admin123 | Grafanaå¯†ç  |

### B. ç«¯å£æ˜ å°„å®Œæ•´åˆ—è¡¨

| ç«¯å£ | æœåŠ¡ | åè®® | è¯´æ˜ |
|------|------|------|------|
| 3200 | Frontend | HTTP | å‰ç«¯åº”ç”¨ |
| 8080 | API Gateway | HTTP | APIç½‘å…³ |
| 3000 | Autonomous Engine | HTTP | è‡ªæ²»å¼•æ“ |
| 3001 | Model Adapter | HTTP | æ¨¡å‹é€‚é…å™¨ |
| 3002 | Learning System | HTTP | å­¦ä¹ ç³»ç»Ÿ |
| 3003 | Goal Management | HTTP | ç›®æ ‡ç®¡ç† |
| 6379 | Redis | TCP | ç¼“å­˜ |
| 27017 | MongoDB | TCP | æ–‡æ¡£æ•°æ®åº“ |
| 5432 | PostgreSQL | TCP | å…³ç³»æ•°æ®åº“ |
| 9090 | Prometheus | HTTP | æŒ‡æ ‡é‡‡é›† |
| 3100 | Grafana | HTTP | ç›‘æ§é¢æ¿ |
| 16686 | Jaeger | HTTP | åˆ†å¸ƒå¼è¿½è¸ª |
| 9200 | Elasticsearch | HTTP | æ—¥å¿—å­˜å‚¨ |
| 5601 | Kibana | HTTP | æ—¥å¿—æŸ¥è¯¢ |

### C. æ•°æ®æŒä¹…åŒ–

**Docker Volumes**ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰æ•°æ®å·
docker volume ls | grep yyc3

# å¤‡ä»½æ•°æ®å·
docker run --rm -v yyc3_mongo-data:/data -v $(pwd):/backup \
  alpine tar czf /backup/mongo-backup.tar.gz /data

# æ¢å¤æ•°æ®å·
docker run --rm -v yyc3_mongo-data:/data -v $(pwd):/backup \
  alpine tar xzf /backup/mongo-backup.tar.gz -C /
```

### D. ç›¸å…³æ–‡æ¡£é“¾æ¥

- [æ¶æ„è®¾è®¡æ–‡æ¡£](docs/AIæ™ºèƒ½æµ®çª—ç³»ç»Ÿ/01-å¯æ’æ‹”å¼æ‹–æ‹½ç§»åŠ¨AIç³»ç»Ÿ.md)
- [æ·±åº¦æ–¹æ¡ˆæ–‡æ¡£](docs/AIæ™ºèƒ½æµ®çª—ç³»ç»Ÿ/02-æ™ºèƒ½æ’æ‹”å¼å¯ç§»åŠ¨AIæ‰§è¡Œæ–¹æ¡ˆ.md)
- [APIæ–‡æ¡£](docs/AI_WIDGET_ENHANCED_ARCHITECTURE.md)
- [å¿«é€Ÿå¼€å§‹](docs/QUICK_START.md)

---

## è”ç³»æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’æŸ¥ç« èŠ‚
2. æœç´¢GitHub Issues
3. æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—å’Œç›‘æ§é¢æ¿
4. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ

---

**æœ€åæ›´æ–°**: 2024-01-15
**ç‰ˆæœ¬**: 1.0.0
