# ğŸŒŸ AIæ™ºèƒ½å®¢æœç³»ç»Ÿ - é¡¶å±‚è‡ªæ²»å•å…ƒè®¾è®¡

## ğŸ“‹ æ–°å¢æ¨¡å—ï¼šAIæ™ºèƒ½å®¢æœç³»ç»Ÿ

### æ¨¡å—å®šä½ä¸æ¶æ„

```yaml
æ¨¡å—å®šä½:
  âœ… ç³»ç»Ÿé¡¶å±‚åº”ç”¨: å…¨å±€å¯è®¿é—®çš„æ™ºèƒ½åŠ©æ‰‹
  âœ… å¤šæ¨¡æ€äº¤äº’: æ–‡æœ¬+è¯­éŸ³+å›¾åƒ+æƒ…æ„Ÿè¯†åˆ«
  âœ… è‡ªæ²»è¿è¡Œ: ç‹¬ç«‹å¾®æœåŠ¡æ¶æ„
  âœ… æƒé™åˆ†ç¦»: å®¢æœæ¿å— + è¿ç»´æ¿å—

æŠ€æœ¯ç‰¹æ€§:
  ğŸ”¹ æµ®åŠ¨å¯æ‹–æ‹½: åŸºäºWeb Componentsçš„ç‹¬ç«‹çª—å£
  ğŸ”¹ æ™ºèƒ½é¢„æµ‹: ç”¨æˆ·æ„å›¾é¢„æµ‹å’Œä¸»åŠ¨æœåŠ¡
  ğŸ”¹ æƒ…æ„ŸåŒæ­¥: æƒ…æ„Ÿè¯†åˆ«ä¸å“åº”é€‚é…
  ğŸ”¹ è‡ªä¸»å­¦ä¹ : å¯¹è¯å†å²å­¦ä¹ å’ŒçŸ¥è¯†æ›´æ–°
  ğŸ”¹ ä¸€é”®è·³è½¬: æ·±åº¦é“¾æ¥ç³»ç»ŸåŠŸèƒ½
```text

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### æ€»ä½“æ¶æ„

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AIæ™ºèƒ½å®¢æœç³»ç»Ÿ (é¡¶å±‚)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å‰ç«¯å±‚:                                                       â”‚
â”‚   âœ… æµ®åŠ¨çª—å£ç»„ä»¶ (Web Components)                           â”‚
â”‚   âœ… å¤šæ¨¡æ€äº¤äº’ç•Œé¢ (Vue 3 + è¯­éŸ³/å›¾åƒ)                       â”‚
â”‚   âœ… å®æ—¶é€šä¿¡ (WebSocket + SSE)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœåŠ¡å±‚:                                                       â”‚
â”‚   ğŸ”¹ å¯¹è¯ç®¡ç†æœåŠ¡ (Dialogue Management)                      â”‚
â”‚   ğŸ”¹ æ„å›¾è¯†åˆ«æœåŠ¡ (Intent Recognition)                      â”‚
â”‚   ğŸ”¹ æƒ…æ„Ÿåˆ†ææœåŠ¡ (Sentiment Analysis)                      â”‚
â”‚   ğŸ”¹ çŸ¥è¯†æ£€ç´¢æœåŠ¡ (Knowledge Retrieval)                     â”‚
â”‚   ğŸ”¹ è‡ªä¸»å­¦ä¹ å¼•æ“ (Self-Learning Engine)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ AIå¼•æ“å±‚:                                                     â”‚
â”‚   ğŸ”¸ å¤§è¯­è¨€æ¨¡å‹é›†æˆ (LLM Integration)                        â”‚
â”‚   ğŸ”¸ å¤šæ¨¡æ€ç†è§£ (Multimodal Understanding)                  â”‚
â”‚   ğŸ”¸ é¢„æµ‹åˆ†æå¼•æ“ (Predictive Analytics)                    â”‚
â”‚   ğŸ”¸ æ¨èç®—æ³• (Recommendation Algorithms)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ•°æ®å±‚:                                                       â”‚
â”‚   ğŸ¯ å¯¹è¯çŸ¥è¯†åº“ (Conversation Knowledge Base)               â”‚
â”‚   ğŸ¯ ç”¨æˆ·è¡Œä¸ºåº“ (User Behavior Repository)                  â”‚
â”‚   ğŸ¯ æƒ…æ„Ÿæ¨¡å‹åº“ (Sentiment Model Library)                   â”‚
â”‚   ğŸ¯ å­¦ä¹ è½¨è¿¹åº“ (Learning Trajectory DB)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### å¾®æœåŠ¡æ¶æ„æ‰©å±•

```yaml
æ–°å¢å¾®æœåŠ¡:
  ai-customer-service: æ™ºèƒ½å®¢æœæ ¸å¿ƒæœåŠ¡
  ai-dialogue-service: å¯¹è¯ç®¡ç†æœåŠ¡
  ai-sentiment-service: æƒ…æ„Ÿåˆ†ææœåŠ¡
  ai-learning-service: è‡ªä¸»å­¦ä¹ æœåŠ¡
  ai-prediction-service: é¢„æµ‹åˆ†ææœåŠ¡

æœåŠ¡ä¾èµ–:
  âœ… ç”¨æˆ·æœåŠ¡: è·å–ç”¨æˆ·ä¿¡æ¯å’Œæƒé™
  âœ… èœå•æœåŠ¡: èœå“ä¿¡æ¯å’Œæ¨è
  âœ… è®¢å•æœåŠ¡: è®¢å•æŸ¥è¯¢å’Œæ“ä½œ
  âœ… åº“å­˜æœåŠ¡: åº“å­˜çŠ¶æ€æŸ¥è¯¢
  âœ… æˆæœ¬æœåŠ¡: æˆæœ¬æ•°æ®æŸ¥è¯¢
  âœ… æŠ¥è¡¨æœåŠ¡: åˆ†ææŠ¥å‘Šç”Ÿæˆ
```text

---

## ğŸ¨ å‰ç«¯ç»„ä»¶è®¾è®¡

### æµ®åŠ¨å¼æ™ºèƒ½å®¢æœçª—å£

```vue
<template>
  <!-- ä¸»æµ®åŠ¨çª—å£ -->
  <div 
    class="ai-assistant-floating"
    :class="{
      'minimized': isMinimized,
      'dragging': isDragging,
      'customer-mode': currentMode === 'customer',
      'ops-mode': currentMode === 'operations'
    }"
    :style="windowStyle"
    @mousedown="startDrag"
  >
    <!-- çª—å£å¤´éƒ¨ -->
    <div class="assistant-header" @dblclick="toggleMinimize">
      <div class="header-left">
        <i class="assistant-avatar" :class="getAvatarClass"></i>
        <span class="assistant-name">{{ assistantName }}</span>
        <el-tag 
          size="small" 
          :type="currentMode === 'customer' ? 'success' : 'warning'"
        >
          {{ currentMode === 'customer' ? 'å®¢æœæ¨¡å¼' : 'è¿ç»´æ¨¡å¼' }}
        </el-tag>
      </div>
      <div class="header-actions">
        <el-tooltip content="æœ€å°åŒ–">
          <i class="el-icon-minus" @click="toggleMinimize"></i>
        </el-tooltip>
        <el-tooltip content="åˆ‡æ¢æ¨¡å¼">
          <i class="el-icon-refresh" @click="toggleMode"></i>
        </el-tooltip>
        <el-tooltip content="è®¾ç½®">
          <i class="el-icon-setting" @click="showSettings"></i>
        </el-tooltip>
        <el-tooltip content="å…³é—­">
          <i class="el-icon-close" @click="closeAssistant"></i>
        </el-tooltip>
      </div>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div v-show="!isMinimized" class="assistant-content">
      <!-- å¯¹è¯åŒºåŸŸ -->
      <div class="chat-container">
        <div class="message-list" ref="messageList">
          <div 
            v-for="(message, index) in messages" 
            :key="index"
            class="message-item"
            :class="{
              'user-message': message.role === 'user',
              'assistant-message': message.role === 'assistant',
              'system-message': message.role === 'system'
            }"
          >
            <div class="message-avatar">
              <i :class="getMessageAvatar(message.role)"></i>
            </div>
            <div class="message-content">
              <div class="message-text" v-html="formatMessage(message.content)"></div>
              <div class="message-actions" v-if="message.actions">
                <el-button 
                  v-for="action in message.actions"
                  :key="action.label"
                  size="mini"
                  :type="action.type || 'primary'"
                  @click="handleAction(action)"
                >
                  {{ action.label }}
                </el-button>
              </div>
              <div class="message-time">{{ formatTime(message.timestamp) }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- è¾“å…¥åŒºåŸŸ -->
      <div class="input-container">
        <!-- å¤šæ¨¡æ€è¾“å…¥ -->
        <div class="input-toolbar">
          <el-tooltip content="è¯­éŸ³è¾“å…¥">
            <i 
              class="el-icon-microphone" 
              :class="{ 'recording': isRecording }"
              @click="toggleVoiceInput"
            ></i>
          </el-tooltip>
          <el-tooltip content="å›¾ç‰‡è¯†åˆ«">
            <i class="el-icon-picture" @click="triggerImageInput"></i>
          </el-tooltip>
          <el-tooltip content="æ–‡ä»¶ä¸Šä¼ ">
            <i class="el-icon-upload" @click="triggerFileUpload"></i>
          </el-tooltip>
          <el-tooltip content="æƒ…æ„Ÿåˆ†æ">
            <i 
              class="el-icon-star-off"
              :class="{ 'active': sentimentAnalysisEnabled }"
              @click="toggleSentimentAnalysis"
            ></i>
          </el-tooltip>
        </div>

        <!-- æ–‡æœ¬è¾“å…¥ -->
        <div class="text-input-area">
          <el-input
            v-model="inputText"
            type="textarea"
            :rows="2"
            :maxlength="500"
            placeholder="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜..."
            @keydown.enter.exact.prevent="sendMessage"
            resize="none"
          ></el-input>
          <el-button 
            type="primary" 
            :loading="isLoading"
            @click="sendMessage"
            class="send-button"
          >
            <i class="el-icon-s-promotion"></i>
          </el-button>
        </div>

        <!-- å¿«æ·æ“ä½œ -->
        <div class="quick-actions" v-if="showQuickActions">
          <div class="quick-action-item" 
               v-for="action in quickActions" 
               :key="action.label"
               @click="handleQuickAction(action)">
            <i :class="action.icon"></i>
            <span>{{ action.label }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- æœ€å°åŒ–çŠ¶æ€ -->
    <div v-show="isMinimized" class="minimized-state" @dblclick="toggleMinimize">
      <i class="el-icon-chat-dot-round"></i>
      <el-badge :value="unreadCount" v-if="unreadCount > 0"></el-badge>
    </div>

    <!-- è®¾ç½®é¢æ¿ -->
    <el-drawer
      title="AIåŠ©æ‰‹è®¾ç½®"
      :visible.sync="settingsVisible"
      direction="rtl"
      size="300px"
    >
      <assistant-settings 
        :current-mode="currentMode"
        @mode-change="handleModeChange"
        @settings-update="handleSettingsUpdate"
      />
    </el-drawer>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted, onUnmounted, nextTick } from 'vue'
import { useUserStore } from '@/stores/user'
import { useAIAssistant } from '@/composables/useAIAssistant'
import AssistantSettings from './AssistantSettings.vue'

// å“åº”å¼æ•°æ®
const isMinimized = ref(false)
const isDragging = ref(false)
const currentMode = ref<'customer' | 'operations'>('customer')
const inputText = ref('')
const isLoading = ref(false)
const isRecording = ref(false)
const sentimentAnalysisEnabled = ref(true)
const settingsVisible = ref(false)
const unreadCount = ref(0)
const messageList = ref<HTMLElement>()

// æ‹–æ‹½ç›¸å…³çŠ¶æ€
const dragState = ref({
  startX: 0,
  startY: 0,
  startLeft: 0,
  startTop: 0
})

// ç»„åˆå¼API
const { 
  messages, 
  sendMessage: sendAIMessage, 
  quickActions,
  showQuickActions
} = useAIAssistant()

// è®¡ç®—å±æ€§
const assistantName = computed(() => {
  return currentMode.value === 'customer' ? 'æ™ºèƒ½å®¢æœå°åŠ©æ‰‹' : 'è¿ç»´æ™ºèƒ½åŠ©æ‰‹'
})

const getAvatarClass = computed(() => {
  return currentMode.value === 'customer' 
    ? 'el-icon-user-solid' 
    : 'el-icon-monitor'
})

const windowStyle = computed(() => ({
  left: dragState.value.startLeft + 'px',
  top: dragState.value.startTop + 'px',
  zIndex: 9999
}))

// æ–¹æ³•
const startDrag = (event: MouseEvent) => {
  isDragging.value = true
  dragState.value.startX = event.clientX
  dragState.value.startY = event.clientY
  dragState.value.startLeft = parseInt(windowStyle.value.left)
  dragState.value.startTop = parseInt(windowStyle.value.top)
  
  document.addEventListener('mousemove', onDrag)
  document.addEventListener('mouseup', stopDrag)
}

const onDrag = (event: MouseEvent) => {
  if (!isDragging.value) return
  
  const deltaX = event.clientX - dragState.value.startX
  const deltaY = event.clientY - dragState.value.startY
  
  dragState.value.startLeft += deltaX
  dragState.value.startTop += deltaY
  
  dragState.value.startX = event.clientX
  dragState.value.startY = event.clientY
}

const stopDrag = () => {
  isDragging.value = false
  document.removeEventListener('mousemove', onDrag)
  document.removeEventListener('mouseup', stopDrag)
}

const toggleMinimize = () => {
  isMinimized.value = !isMinimized.value
}

const toggleMode = () => {
  currentMode.value = currentMode.value === 'customer' ? 'operations' : 'customer'
}

const sendMessage = async () => {
  if (!inputText.value.trim()) return
  
  isLoading.value = true
  try {
    await sendAIMessage(inputText.value, currentMode.value)
    inputText.value = ''
    scrollToBottom()
  } catch (error) {
    console.error('å‘é€æ¶ˆæ¯å¤±è´¥:', error)
  } finally {
    isLoading.value = false
  }
}

const toggleVoiceInput = () => {
  isRecording.value = !isRecording.value
  // è¯­éŸ³è¯†åˆ«é€»è¾‘
}

const toggleSentimentAnalysis = () => {
  sentimentAnalysisEnabled.value = !sentimentAnalysisEnabled.value
}

const scrollToBottom = () => {
  nextTick(() => {
    if (messageList.value) {
      messageList.value.scrollTop = messageList.value.scrollHeight
    }
  })
}

const getMessageAvatar = (role: string) => {
  switch (role) {
    case 'user': return 'el-icon-user'
    case 'assistant': 
      return currentMode.value === 'customer' 
        ? 'el-icon-user-solid' 
        : 'el-icon-monitor'
    case 'system': return 'el-icon-info'
    default: return 'el-icon-question'
  }
}

const formatMessage = (content: string) => {
  // æ ¼å¼åŒ–æ¶ˆæ¯å†…å®¹ï¼Œæ”¯æŒMarkdownç­‰
  return content.replace(/\n/g, '<br>')
}

const formatTime = (timestamp: number) => {
  return new Date(timestamp).toLocaleTimeString()
}

const handleAction = (action: any) => {
  // å¤„ç†æ¶ˆæ¯åŠ¨ä½œ
  console.log('æ‰§è¡ŒåŠ¨ä½œ:', action)
}

const handleQuickAction = (action: any) => {
  inputText.value = action.prompt
  sendMessage()
}

const showSettings = () => {
  settingsVisible.value = true
}

const closeAssistant = () => {
  // å…³é—­åŠ©æ‰‹é€»è¾‘
}

const handleModeChange = (mode: 'customer' | 'operations') => {
  currentMode.value = mode
}

const handleSettingsUpdate = (settings: any) => {
  // æ›´æ–°è®¾ç½®
}

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  // åˆå§‹åŒ–ä½ç½®
  dragState.value.startLeft = window.innerWidth - 400
  dragState.value.startTop = window.innerHeight - 600
})

onUnmounted(() => {
  document.removeEventListener('mousemove', onDrag)
  document.removeEventListener('mouseup', stopDrag)
})
</script>

<style scoped>
.ai-assistant-floating {
  position: fixed;
  width: 380px;
  height: 500px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  border: 1px solid #e4e7ed;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transition: all 0.3s ease;
  user-select: none;
}

.ai-assistant-floating.customer-mode {
  border-top: 4px solid #67c23a;
}

.ai-assistant-floating.ops-mode {
  border-top: 4px solid #e6a23c;
}

.ai-assistant-floating.minimized {
  height: 60px;
  width: 200px;
}

.ai-assistant-floating.dragging {
  cursor: grabbing;
  opacity: 0.9;
}

.assistant-header {
  height: 50px;
  background: #f5f7fa;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
  border-bottom: 1px solid #e4e7ed;
  cursor: move;
  user-select: none;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.assistant-avatar {
  font-size: 18px;
  color: #409eff;
}

.assistant-name {
  font-weight: 600;
  font-size: 14px;
}

.header-actions {
  display: flex;
  gap: 12px;
}

.header-actions i {
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  transition: background-color 0.2s;
}

.header-actions i:hover {
  background-color: #e4e7ed;
}

.assistant-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.chat-container {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.message-list {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.message-item {
  display: flex;
  gap: 8px;
}

.message-item.user-message {
  flex-direction: row-reverse;
}

.message-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: #f0f2f5;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.message-content {
  max-width: 70%;
  background: #f0f2f5;
  padding: 8px 12px;
  border-radius: 12px;
  position: relative;
}

.user-message .message-content {
  background: #409eff;
  color: white;
}

.message-text {
  word-wrap: break-word;
  line-height: 1.4;
}

.message-actions {
  margin-top: 8px;
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.message-time {
  font-size: 12px;
  color: #909399;
  margin-top: 4px;
  text-align: right;
}

.user-message .message-time {
  color: rgba(255, 255, 255, 0.7);
}

.input-container {
  border-top: 1px solid #e4e7ed;
  padding: 12px;
}

.input-toolbar {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}

.input-toolbar i {
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  transition: all 0.2s;
}

.input-toolbar i:hover {
  background-color: #f0f2f5;
}

.input-toolbar i.recording {
  color: #f56c6c;
  animation: pulse 1s infinite;
}

.input-toolbar i.active {
  color: #e6a23c;
}

.text-input-area {
  display: flex;
  gap: 8px;
  align-items: flex-end;
}

.send-button {
  flex-shrink: 0;
}

.quick-actions {
  display: flex;
  gap: 8px;
  margin-top: 8px;
  flex-wrap: wrap;
}

.quick-action-item {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  background: #f0f2f5;
  border-radius: 16px;
  font-size: 12px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.quick-action-item:hover {
  background: #e4e7ed;
}

.minimized-state {
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 24px;
  color: #409eff;
}

@keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
}
</style>
```text

---

## ğŸ”§ åç«¯æœåŠ¡è®¾è®¡

### æ–°å¢å¾®æœåŠ¡ï¼šAIæ™ºèƒ½å®¢æœæœåŠ¡

#### æœåŠ¡é…ç½®

```yaml
# application-ai-customer.yml
spring:
  application:
    name: ai-customer-service
  datasource:
    url: jdbc:postgresql://localhost:5432/ai_customer_db
    username: ai_customer_user
    password: ai_customer_pass
  
  redis:
    host: localhost
    port: 6379
    database: 5

ai:
  openai:
    api-key: ${OPENAI_API_KEY}
    base-url: https://api.openai.com/v1
    model: gpt-4
    max-tokens: 2000
    temperature: 0.7
  
  sentiment:
    enabled: true
    model-path: classpath:models/sentiment-model.bin
  
  learning:
    enabled: true
    knowledge-base-path: /data/ai-knowledge
    update-interval: 3600

server:
  port: 8086

eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/
```text

#### æ ¸å¿ƒæœåŠ¡ç±»

```java
@Service
@Slf4j
public class AICustomerService {
    
    @Autowired
    private DialogueManager dialogueManager;
    
    @Autowired
    private IntentRecognizer intentRecognizer;
    
    @Autowired
    private SentimentAnalyzer sentimentAnalyzer;
    
    @Autowired
    private KnowledgeRetriever knowledgeRetriever;
    
    @Autowired
    private SelfLearningEngine learningEngine;
    
    @Autowired
    private PredictionEngine predictionEngine;
    
    /**
     * å¤„ç†ç”¨æˆ·æ¶ˆæ¯
     */
    public AssistantResponse processMessage(UserMessageRequest request) {
        try {
            // 1. æƒ…æ„Ÿåˆ†æ
            SentimentAnalysis sentiment = sentimentAnalyzer.analyze(request.getMessage());
            
            // 2. æ„å›¾è¯†åˆ«
            IntentResult intent = intentRecognizer.recognize(request.getMessage(), request.getContext());
            
            // 3. çŸ¥è¯†æ£€ç´¢
            List<KnowledgeItem> knowledge = knowledgeRetriever.retrieve(intent, request.getMode());
            
            // 4. å¯¹è¯ç®¡ç†
            DialogueResponse dialogueResponse = dialogueManager.process(
                request, intent, sentiment, knowledge);
            
            // 5. é¢„æµ‹åˆ†æ
            PredictionResult prediction = predictionEngine.predictNextActions(request, intent);
            
            // 6. å­¦ä¹ æ›´æ–°
            learningEngine.learnFromInteraction(request, dialogueResponse);
            
            return buildAssistantResponse(dialogueResponse, prediction, sentiment);
            
        } catch (Exception e) {
            log.error("å¤„ç†AIå®¢æœæ¶ˆæ¯å¤±è´¥", e);
            return buildErrorResponse(e);
        }
    }
    
    /**
     * è·å–å¿«æ·æ“ä½œ
     */
    public List<QuickAction> getQuickActions(String mode, UserContext context) {
        return predictionEngine.predictQuickActions(mode, context);
    }
    
    /**
     * åˆ‡æ¢å®¢æœæ¨¡å¼
     */
    public void switchMode(String userId, String mode) {
        // æ›´æ–°ç”¨æˆ·æ¨¡å¼åå¥½
        learningEngine.updateUserPreference(userId, "mode", mode);
    }
    
    /**
     * è·å–å­¦ä¹ æŠ¥å‘Š
     */
    public LearningReport getLearningReport(String mode) {
        return learningEngine.generateReport(mode);
    }
}

/**
 * å¯¹è¯ç®¡ç†æœåŠ¡
 */
@Service
public class DialogueManager {
    
    @Autowired
    private LLMIntegrationService llmService;
    
    @Autowired
    private DialogueHistoryService historyService;
    
    @Autowired
    private ActionExecutor actionExecutor;
    
    public DialogueResponse process(UserMessageRequest request, 
                                   IntentResult intent, 
                                   SentimentAnalysis sentiment,
                                   List<KnowledgeItem> knowledge) {
        
        // æ„å»ºå¯¹è¯ä¸Šä¸‹æ–‡
        DialogueContext context = buildContext(request, intent, sentiment, knowledge);
        
        // è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹
        LLMResponse llmResponse = llmService.generateResponse(context);
        
        // æ‰§è¡Œç›¸å…³åŠ¨ä½œ
        List<ActionResult> actionResults = executeActions(llmResponse.getActions());
        
        // ä¿å­˜å¯¹è¯å†å²
        historyService.saveInteraction(request, llmResponse, actionResults);
        
        return buildDialogueResponse(llmResponse, actionResults);
    }
    
    private DialogueContext buildContext(UserMessageRequest request, 
                                       IntentResult intent,
                                       SentimentAnalysis sentiment,
                                       List<KnowledgeItem> knowledge) {
        
        DialogueContext context = new DialogueContext();
        context.setUserMessage(request.getMessage());
        context.setUserContext(request.getContext());
        context.setMode(request.getMode());
        context.setIntent(intent);
        context.setSentiment(sentiment);
        context.setKnowledge(knowledge);
        context.setDialogueHistory(historyService.getRecentHistory(request.getUserId()));
        context.setSystemTime(LocalDateTime.now());
        
        return context;
    }
    
    private List<ActionResult> executeActions(List<Action> actions) {
        return actions.stream()
            .map(actionExecutor::execute)
            .collect(Collectors.toList());
    }
}

/**
 * æƒ…æ„Ÿåˆ†ææœåŠ¡
 */
@Service
public class SentimentAnalyzer {
    
    @Autowired
    private SentimentModel sentimentModel;
    
    @Autowired
    private EmotionDetector emotionDetector;
    
    public SentimentAnalysis analyze(String message) {
        SentimentAnalysis analysis = new SentimentAnalysis();
        
        // æ–‡æœ¬æƒ…æ„Ÿåˆ†æ
        TextSentiment textSentiment = sentimentModel.analyzeText(message);
        analysis.setTextSentiment(textSentiment);
        
        // æƒ…æ„Ÿå¼ºåº¦è®¡ç®—
        analysis.setIntensity(calculateIntensity(textSentiment));
        
        // æƒ…æ„Ÿæ ‡ç­¾
        analysis.setEmotionTags(extractEmotionTags(message));
        
        // å“åº”å»ºè®®
        analysis.setResponseSuggestions(generateResponseSuggestions(textSentiment));
        
        return analysis;
    }
    
    public SentimentAnalysis analyzeWithVoice(String audioData) {
        // è¯­éŸ³æƒ…æ„Ÿåˆ†æ
        VoiceEmotion voiceEmotion = emotionDetector.detectFromAudio(audioData);
        // ç»“åˆæ–‡æœ¬å’Œè¯­éŸ³æƒ…æ„Ÿ
        return combineSentiments(voiceEmotion);
    }
}

/**
 * è‡ªä¸»å­¦ä¹ å¼•æ“
 */
@Service
public class SelfLearningEngine {
    
    @Autowired
    private KnowledgeBaseService knowledgeBase;
    
    @Autowired
    private BehaviorAnalyzer behaviorAnalyzer;
    
    @Autowired
    private ModelUpdater modelUpdater;
    
    public void learnFromInteraction(UserMessageRequest request, 
                                   DialogueResponse response) {
        // 1. æ›´æ–°ç”¨æˆ·è¡Œä¸ºæ¨¡å‹
        behaviorAnalyzer.recordInteraction(request, response);
        
        // 2. çŸ¥è¯†åº“æ›´æ–°
        updateKnowledgeBase(request, response);
        
        // 3. æ¨¡å‹å‚æ•°è°ƒæ•´
        modelUpdater.updateBasedOnFeedback(request, response);
        
        // 4. æ¨¡å¼è¯†åˆ«
        detectPatterns(request, response);
    }
    
    public LearningReport generateReport(String mode) {
        LearningReport report = new LearningReport();
        report.setMode(mode);
        report.setLearningStats(getLearningStatistics(mode));
        report.setKnowledgeGrowth(getKnowledgeGrowth(mode));
        report.setPerformanceMetrics(getPerformanceMetrics(mode));
        report.setImprovementSuggestions(getImprovementSuggestions(mode));
        
        return report;
    }
    
    private void updateKnowledgeBase(UserMessageRequest request, 
                                   DialogueResponse response) {
        // æå–æ–°çŸ¥è¯†
        List<NewKnowledge> newKnowledge = extractNewKnowledge(request, response);
        
        // éªŒè¯çŸ¥è¯†è´¨é‡
        List<NewKnowledge> validatedKnowledge = validateKnowledge(newKnowledge);
        
        // æ›´æ–°çŸ¥è¯†åº“
        knowledgeBase.addKnowledge(validatedKnowledge);
    }
}

/**
 * é¢„æµ‹åˆ†æå¼•æ“
 */
@Service
public class PredictionEngine {
    
    @Autowired
    private UserBehaviorRepository behaviorRepository;
    
    @Autowired
    private PatternRecognizer patternRecognizer;
    
    @Autowired
    private RecommendationEngine recommendationEngine;
    
    public PredictionResult predictNextActions(UserMessageRequest request, 
                                             IntentResult intent) {
        
        PredictionResult prediction = new PredictionResult();
        
        // ç”¨æˆ·è¡Œä¸ºé¢„æµ‹
        List<PredictedAction> predictedActions = predictUserActions(request, intent);
        prediction.setPredictedActions(predictedActions);
        
        // é—®é¢˜é¢„æµ‹
        List<PredictedQuestion> predictedQuestions = predictUserQuestions(request);
        prediction.setPredictedQuestions(predictedQuestions);
        
        // éœ€æ±‚é¢„æµ‹
        List<PredictedNeed> predictedNeeds = predictUserNeeds(request);
        prediction.setPredictedNeeds(predictedNeeds);
        
        return prediction;
    }
    
    public List<QuickAction> predictQuickActions(String mode, UserContext context) {
        List<QuickAction> quickActions = new ArrayList<>();
        
        // åŸºäºæ¨¡å¼çš„å¿«æ·æ“ä½œ
        quickActions.addAll(getModeSpecificActions(mode));
        
        // åŸºäºç”¨æˆ·è¡Œä¸ºçš„å¿«æ·æ“ä½œ
        quickActions.addAll(getBehaviorBasedActions(context));
        
        // åŸºäºæƒ…å¢ƒçš„å¿«æ·æ“ä½œ
        quickActions.addAll(getContextBasedActions(context));
        
        return quickActions.stream()
            .distinct()
            .limit(6) // é™åˆ¶æ•°é‡
            .collect(Collectors.toList());
    }
    
    private List<QuickAction> getModeSpecificActions(String mode) {
        if ("customer".equals(mode)) {
            return Arrays.asList(
                new QuickAction("æŸ¥è¯¢è®¢å•", "el-icon-tickets", "æˆ‘æƒ³æŸ¥è¯¢æˆ‘çš„è®¢å•"),
                new QuickAction("èœå“æ¨è", "el-icon-star-on", "æ¨èä¸€äº›çƒ­é—¨èœå“"),
                new QuickAction("æŠ•è¯‰å»ºè®®", "el-icon-chat-line-round", "æˆ‘è¦æå‡ºå»ºè®®"),
                new QuickAction("ä¼šå‘˜æœåŠ¡", "el-icon-user", "ä¼šå‘˜æƒç›Šå’¨è¯¢")
            );
        } else {
            return Arrays.asList(
                new QuickAction("ç³»ç»ŸçŠ¶æ€", "el-icon-monitor", "æŸ¥çœ‹ç³»ç»Ÿè¿è¡ŒçŠ¶æ€"),
                new QuickAction("æ€§èƒ½ç›‘æ§", "el-icon-data-analysis", "ç³»ç»Ÿæ€§èƒ½æŠ¥å‘Š"),
                new QuickAction("å¼‚å¸¸å‘Šè­¦", "el-icon-warning", "æŸ¥çœ‹ç³»ç»Ÿå‘Šè­¦"),
                new QuickAction("è¿ç»´æ—¥å¿—", "el-icon-document", "æŸ¥çœ‹è¿ç»´æ—¥å¿—")
            );
        }
    }
}
```text

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡æ‰©å±•

### æ–°å¢æ•°æ®è¡¨

```sql
-- AIå®¢æœå¯¹è¯è®°å½•è¡¨
CREATE TABLE ai_conversations (
    id BIGSERIAL PRIMARY KEY,
    session_id VARCHAR(100) NOT NULL,
    user_id BIGINT NOT NULL,
    mode VARCHAR(20) NOT NULL, -- 'customer' or 'operations'
    user_message TEXT NOT NULL,
    assistant_response TEXT NOT NULL,
    intent VARCHAR(100),
    sentiment_score DECIMAL(3,2),
    emotion_tags JSONB,
    context_data JSONB,
    actions_executed JSONB,
    response_time_ms INTEGER,
    user_rating INTEGER, -- ç”¨æˆ·è¯„åˆ† 1-5
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_ai_conversations_session ON ai_conversations(session_id);
CREATE INDEX idx_ai_conversations_user_mode ON ai_conversations(user_id, mode);
CREATE INDEX idx_ai_conversations_created ON ai_conversations(created_at);

-- AIçŸ¥è¯†åº“è¡¨
CREATE TABLE ai_knowledge_base (
    id BIGSERIAL PRIMARY KEY,
    question_pattern TEXT NOT NULL,
    answer_template TEXT NOT NULL,
    category VARCHAR(100) NOT NULL,
    tags JSONB,
    confidence_score DECIMAL(3,2) DEFAULT 1.0,
    usage_count INTEGER DEFAULT 0,
    success_rate DECIMAL(4,3) DEFAULT 1.0,
    mode VARCHAR(20) NOT NULL,
    enabled BOOLEAN DEFAULT true,
    created_by BIGINT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç”¨æˆ·è¡Œä¸ºåˆ†æè¡¨
CREATE TABLE ai_user_behavior (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,
    behavior_type VARCHAR(50) NOT NULL,
    behavior_data JSONB NOT NULL,
    mode VARCHAR(20) NOT NULL,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æƒ…æ„Ÿåˆ†æè®°å½•è¡¨
CREATE TABLE ai_sentiment_analysis (
    id BIGSERIAL PRIMARY KEY,
    conversation_id BIGINT REFERENCES ai_conversations(id),
    text_sentiment VARCHAR(20),
    voice_sentiment VARCHAR(20),
    combined_sentiment VARCHAR(20),
    intensity_score DECIMAL(3,2),
    emotion_tags JSONB,
    analysis_data JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å­¦ä¹ è½¨è¿¹è¡¨
CREATE TABLE ai_learning_trajectory (
    id BIGSERIAL PRIMARY KEY,
    model_version VARCHAR(50) NOT NULL,
    learning_type VARCHAR(50) NOT NULL,
    before_metrics JSONB,
    after_metrics JSONB,
    improvement_score DECIMAL(4,3),
    learning_data JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- é¢„æµ‹åˆ†æè¡¨
CREATE TABLE ai_predictions (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT,
    prediction_type VARCHAR(50) NOT NULL,
    predicted_actions JSONB,
    confidence_scores JSONB,
    context_data JSONB,
    actual_outcome JSONB,
    accuracy_score DECIMAL(4,3),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```text

---

## ğŸ”— APIæ¥å£è®¾è®¡

### AIå®¢æœAPI

```java
@RestController
@RequestMapping("/api/v1/ai-assistant")
@Validated
@Api(tags = "AIæ™ºèƒ½å®¢æœ")
public class AICustomerController {
    
    @Autowired
    private AICustomerService aiCustomerService;
    
    @PostMapping("/chat")
    @ApiOperation("å‘é€æ¶ˆæ¯ç»™AIåŠ©æ‰‹")
    public ApiResponse<AssistantResponse> chat(
            @RequestBody @Valid UserMessageRequest request) {
        
        AssistantResponse response = aiCustomerService.processMessage(request);
        return ApiResponse.success(response);
    }
    
    @GetMapping("/quick-actions")
    @ApiOperation("è·å–å¿«æ·æ“ä½œ")
    public ApiResponse<List<QuickAction>> getQuickActions(
            @RequestParam String mode,
            @RequestParam(required = false) String context) {
        
        UserContext userContext = parseContext(context);
        List<QuickAction> actions = aiCustomerService.getQuickActions(mode, userContext);
        return ApiResponse.success(actions);
    }
    
    @PostMapping("/switch-mode")
    @ApiOperation("åˆ‡æ¢å®¢æœæ¨¡å¼")
    public ApiResponse<Boolean> switchMode(
            @RequestParam String userId,
            @RequestParam String mode) {
        
        aiCustomerService.switchMode(userId, mode);
        return ApiResponse.success(true);
    }
    
    @GetMapping("/learning-report")
    @ApiOperation("è·å–å­¦ä¹ æŠ¥å‘Š")
    public ApiResponse<LearningReport> getLearningReport(
            @RequestParam String mode) {
        
        LearningReport report = aiCustomerService.getLearningReport(mode);
        return ApiResponse.success(report);
    }
    
    @PostMapping("/feedback")
    @ApiOperation("æäº¤åé¦ˆ")
    public ApiResponse<Boolean> submitFeedback(
            @RequestBody @Valid FeedbackRequest request) {
        
        aiCustomerService.processFeedback(request);
        return ApiResponse.success(true);
    }
}

// DTOå®šä¹‰
@Data
@ApiModel("ç”¨æˆ·æ¶ˆæ¯è¯·æ±‚")
public class UserMessageRequest {
    @ApiModelProperty(value = "ç”¨æˆ·ID", required = true)
    @NotBlank
    private String userId;
    
    @ApiModelProperty(value = "æ¶ˆæ¯å†…å®¹", required = true)
    @NotBlank
    private String message;
    
    @ApiModelProperty(value = "å®¢æœæ¨¡å¼", required = true)
    @Pattern(regexp = "customer|operations")
    private String mode;
    
    @ApiModelProperty("ä¸Šä¸‹æ–‡ä¿¡æ¯")
    private Map<String, Object> context;
    
    @ApiModelProperty("è¯­éŸ³æ•°æ®")
    private String audioData;
    
    @ApiModelProperty("å›¾åƒæ•°æ®")
    private String imageData;
}

@Data
@ApiModel("åŠ©æ‰‹å“åº”")
public class AssistantResponse {
    @ApiModelProperty("å›å¤å†…å®¹")
    private String response;
    
    @ApiModelProperty("æƒ…æ„Ÿåˆ†æç»“æœ")
    private SentimentAnalysis sentiment;
    
    @ApiModelProperty("æ„å›¾è¯†åˆ«ç»“æœ")
    private IntentResult intent;
    
    @ApiModelProperty("æ‰§è¡Œçš„åŠ¨ä½œ")
    private List<ActionResult> actions;
    
    @ApiModelProperty("é¢„æµ‹ç»“æœ")
    private PredictionResult predictions;
    
    @ApiModelProperty("å¿«æ·æ“ä½œ")
    private List<QuickAction> quickActions;
    
    @ApiModelProperty("å“åº”æ—¶é—´")
    private Long responseTime;
}

@Data
@ApiModel("å¿«æ·æ“ä½œ")
public class QuickAction {
    @ApiModelProperty("æ“ä½œæ ‡ç­¾")
    private String label;
    
    @ApiModelProperty("å›¾æ ‡")
    private String icon;
    
    @ApiModelProperty("æç¤ºæ–‡æœ¬")
    private String prompt;
    
    @ApiModelProperty("åŠ¨ä½œç±»å‹")
    private String actionType;
    
    @ApiModelProperty("ç›®æ ‡URL")
    private String targetUrl;
}

@Data
@ApiModel("å­¦ä¹ æŠ¥å‘Š")
public class LearningReport {
    @ApiModelProperty("æŠ¥å‘Šæ¨¡å¼")
    private String mode;
    
    @ApiModelProperty("å­¦ä¹ ç»Ÿè®¡")
    private LearningStats learningStats;
    
    @ApiModelProperty("çŸ¥è¯†å¢é•¿")
    private KnowledgeGrowth knowledgeGrowth;
    
    @ApiModelProperty("æ€§èƒ½æŒ‡æ ‡")
    private PerformanceMetrics performanceMetrics;
    
    @ApiModelProperty("æ”¹è¿›å»ºè®®")
    private List<ImprovementSuggestion> improvementSuggestions;
}
```text

---

## ğŸ¯ æƒé™æ§åˆ¶ç³»ç»Ÿ

### æƒé™è®¾è®¡

```java
@Service
public class AIPermissionService {
    
    @Autowired
    private UserService userService;
    
    @Autowired
    private RoleService roleService;
    
    /**
     * æ£€æŸ¥AIåŠ©æ‰‹æƒé™
     */
    public boolean checkAIAccessPermission(String userId, String mode) {
        User user = userService.getUserById(userId);
        
        if ("operations".equals(mode)) {
            // è¿ç»´æ¨¡å¼éœ€è¦ç‰¹æ®Šæƒé™
            return hasOperationsPermission(user);
        }
        
        // å®¢æœæ¨¡å¼å¯¹æ‰€æœ‰ç”¨æˆ·å¼€æ”¾
        return true;
    }
    
    /**
     * æ£€æŸ¥åŠŸèƒ½è®¿é—®æƒé™
     */
    public boolean checkFeaturePermission(String userId, String feature) {
        User user = userService.getUserById(userId);
        Set<String> userPermissions = roleService.getUserPermissions(user.getId());
        
        // AIåŠ©æ‰‹åŠŸèƒ½æƒé™æ˜ å°„
        Map<String, String> featurePermissionMap = getFeaturePermissionMap();
        String requiredPermission = featurePermissionMap.get(feature);
        
        return requiredPermission == null || userPermissions.contains(requiredPermission);
    }
    
    /**
     * è·å–ç”¨æˆ·å¯ç”¨çš„AIåŠŸèƒ½
     */
    public List<AIFeature> getAvailableFeatures(String userId) {
        User user = userService.getUserById(userId);
        Set<String> userPermissions = roleService.getUserPermissions(user.getId());
        
        return getAllAIFeatures().stream()
            .filter(feature -> hasPermissionForFeature(feature, userPermissions))
            .collect(Collectors.toList());
    }
    
    private boolean hasOperationsPermission(User user) {
        return user.getRoles().stream()
            .anyMatch(role -> role.getCode().startsWith("OPS_"));
    }
    
    private Map<String, String> getFeaturePermissionMap() {
        Map<String, String> map = new HashMap<>();
        map.put("system_monitoring", "OPS_MONITORING");
        map.put("performance_analysis", "OPS_ANALYSIS");
        map.put("log_viewing", "OPS_LOGS");
        map.put("user_management", "ADMIN_USER");
        // ... æ›´å¤šæƒé™æ˜ å°„
        return map;
    }
}
```text

---

## ğŸ”§ é…ç½®ä¸éƒ¨ç½²

### Dockeré…ç½®

```yaml
# docker-compose-ai.yml
version: '3.8'

services:
  # AIå®¢æœæœåŠ¡
  ai-customer-service:
    build:
      context: ./ai-customer-service
      dockerfile: Dockerfile
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - REDIS_HOST=redis
      - POSTGRES_HOST=postgres
    ports:
      - "8086:8086"
    depends_on:
      - redis
      - postgres
    volumes:
      - ai_models:/app/models
      - ai_knowledge:/app/knowledge
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8086/actuator/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  # æƒ…æ„Ÿåˆ†ææœåŠ¡
  ai-sentiment-service:
    build:
      context: ./ai-sentiment-service
      dockerfile: Dockerfile
    environment:
      - MODEL_PATH=/app/models/sentiment
    volumes:
      - ai_models:/app/models

volumes:
  ai_models:
  ai_knowledge:
```text

### Kubernetesé…ç½®

```yaml
# ai-customer-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ai-customer-service
  labels:
    app: ai-customer-service
    version: v1.0.0
spec:
  replicas: 2
  selector:
    matchLabels:
      app: ai-customer-service
  template:
    metadata:
      labels:
        app: ai-customer-service
        version: v1.0.0
    spec:
      containers:
      - name: ai-customer-service
        image: registry.example.com/smart-restaurant/ai-customer-service:v1.0.0
        ports:
        - containerPort: 8086
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "prod"
        - name: OPENAI_API_KEY
          valueFrom:
            secretKeyRef:
              name: ai-secrets
              key: openai-api-key
        resources:
          requests:
            memory: "1Gi"
            cpu: "500m"
          limits:
            memory: "2Gi"
            cpu: "1000m"
        volumeMounts:
        - name: ai-models
          mountPath: /app/models
        - name: ai-knowledge
          mountPath: /app/knowledge
        livenessProbe:
          httpGet:
            path: /actuator/health
            port: 8086
          initialDelaySeconds: 60
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /actuator/health/readiness
            port: 8086
          initialDelaySeconds: 30
          periodSeconds: 5
      volumes:
      - name: ai-models
        persistentVolumeClaim:
          claimName: ai-models-pvc
      - name: ai-knowledge
        persistentVolumeClaim:
          claimName: ai-knowledge-pvc
---
apiVersion: v1
kind: Service
metadata:
  name: ai-customer-service
spec:
  selector:
    app: ai-customer-service
  ports:
  - port: 8086
    targetPort: 8086
  type: ClusterIP
```text

---

## ğŸ“Š ç›‘æ§ä¸æŒ‡æ ‡

### è‡ªå®šä¹‰æŒ‡æ ‡

```java
@Component
public class AIMetrics {
    
    private final MeterRegistry meterRegistry;
    
    // å¯¹è¯ç›¸å…³æŒ‡æ ‡
    private final Counter totalConversations;
    private final Counter failedConversations;
    private final Timer responseTimeTimer;
    private final Gauge sentimentScoreGauge;
    
    // å­¦ä¹ ç›¸å…³æŒ‡æ ‡
    private final Counter learningUpdates;
    private final Gauge knowledgeBaseSize;
    private final Gauge modelAccuracy;
    
    public AIMetrics(MeterRegistry meterRegistry) {
        this.meterRegistry = meterRegistry;
        
        this.totalConversations = Counter.builder("ai.conversations.total")
            .description("æ€»å¯¹è¯æ•°é‡")
            .register(meterRegistry);
            
        this.failedConversations = Counter.builder("ai.conversations.failed")
            .description("å¤±è´¥å¯¹è¯æ•°é‡")
            .register(meterRegistry);
            
        this.responseTimeTimer = Timer.builder("ai.response.time")
            .description("å“åº”æ—¶é—´åˆ†å¸ƒ")
            .register(meterRegistry);
            
        this.sentimentScoreGauge = Gauge.builder("ai.sentiment.score")
            .description("æƒ…æ„Ÿåˆ†æå¾—åˆ†")
            .register(meterRegistry);
            
        this.learningUpdates = Counter.builder("ai.learning.updates")
            .description("å­¦ä¹ æ›´æ–°æ¬¡æ•°")
            .register(meterRegistry);
            
        this.knowledgeBaseSize = Gauge.builder("ai.knowledge.size")
            .description("çŸ¥è¯†åº“å¤§å°")
            .register(meterRegistry);
            
        this.modelAccuracy = Gauge.builder("ai.model.accuracy")
            .description("æ¨¡å‹å‡†ç¡®ç‡")
            .register(meterRegistry);
    }
    
    public void recordConversation(boolean success, long responseTime, double sentimentScore) {
        totalConversations.increment();
        if (!success) {
            failedConversations.increment();
        }
        responseTimeTimer.record(responseTime, TimeUnit.MILLISECONDS);
        sentimentScoreGauge.set(sentimentScore);
    }
    
    public void recordLearningUpdate(int newKnowledgeItems) {
        learningUpdates.increment();
        knowledgeBaseSize.set(knowledgeBaseSize.value() + newKnowledgeItems);
    }
}
```text

---

## ğŸš€ é›†æˆä¸ä½¿ç”¨

### å‰ç«¯é›†æˆ

```typescript
// main.ts - å…¨å±€æ³¨å†ŒAIåŠ©æ‰‹
import { createApp } from 'vue'
import AIAssistant from '@/components/AIAssistant/AIAssistant.vue'

const app = createApp(App)

// å…¨å±€æ³¨å†ŒAIåŠ©æ‰‹ç»„ä»¶
app.component('AIAssistant', AIAssistant)

app.mount('#app')
```text

```vue
<!-- App.vue - å…¨å±€ä½¿ç”¨ -->
<template>
  <div id="app">
    <router-view />
    <!-- å…¨å±€AIåŠ©æ‰‹ -->
    <AIAssistant />
  </div>
</template>
```text

### ä½¿ç”¨ç¤ºä¾‹

```typescript
// åœ¨ä»»æ„ç»„ä»¶ä¸­ä¸AIåŠ©æ‰‹äº¤äº’
const openAIAssistant = (mode: 'customer' | 'operations' = 'customer') => {
  const assistant = document.querySelector('ai-assistant') as any
  if (assistant) {
    assistant.setMode(mode)
    assistant.show()
  }
}

// ä¸€é”®è·³è½¬åŠŸèƒ½
const jumpToFeature = (feature: string, params?: any) => {
  const assistant = document.querySelector('ai-assistant') as any
  if (assistant) {
    assistant.executeAction({
      type: 'navigate',
      target: feature,
      params: params
    })
  }
}
```text

---

## ğŸ“ˆ ä»·å€¼ä¸æˆæ•ˆ

### ä¸šåŠ¡ä»·å€¼

```yaml
å®¢æˆ·æœåŠ¡æå‡:
  âœ… 24/7æ™ºèƒ½å®¢æœ: å…¨å¤©å€™å®¢æˆ·æœåŠ¡æ”¯æŒ
  âœ… ä¸ªæ€§åŒ–ä½“éªŒ: åŸºäºç”¨æˆ·å†å²çš„ä¸ªæ€§åŒ–æœåŠ¡
  âœ… å¤šæ¨¡æ€äº¤äº’: æ–‡æœ¬ã€è¯­éŸ³ã€å›¾åƒå…¨æ–¹ä½æœåŠ¡
  âœ… æƒ…æ„Ÿæ™ºèƒ½: æƒ…æ„Ÿè¯†åˆ«å’Œé€‚åº”æ€§å“åº”

è¿ç»´æ•ˆç‡æå‡:
  ğŸ”¹ æ™ºèƒ½è¿ç»´åŠ©æ‰‹: è¿ç»´é—®é¢˜æ™ºèƒ½è¯Šæ–­å’Œè§£å†³
  ğŸ”¹ é¢„æµ‹æ€§ç»´æŠ¤: ç³»ç»Ÿé—®é¢˜é¢„æµ‹å’Œé¢„é˜²
  ğŸ”¹ çŸ¥è¯†ç§¯ç´¯: è¿ç»´ç»éªŒè‡ªåŠ¨å­¦ä¹ å’Œä¼ æ‰¿
  ğŸ”¹ æ•ˆç‡æå‡: å‡å°‘äººå·¥è¿ç»´å·¥ä½œé‡

æŠ€æœ¯ä»·å€¼:
  ğŸ”¸ AIæŠ€æœ¯é›†æˆ: å…ˆè¿›çš„AIæŠ€æœ¯è½åœ°åº”ç”¨
  ğŸ”¸ è‡ªä¸»å­¦ä¹ : ç³»ç»ŸæŒç»­è¿›åŒ–å’Œæ”¹è¿›
  ğŸ”¸ å¯æ‰©å±•æ¶æ„: æ”¯æŒæœªæ¥åŠŸèƒ½æ‰©å±•
  ğŸ”¸ æ ‡å‡†åŒ–æ¥å£: ç»Ÿä¸€çš„AIæœåŠ¡æ¥å£
```text

### æˆæ•ˆæŒ‡æ ‡

```python
success_metrics = {
    'customer_satisfaction': {
        'target': 'æå‡25%',
        'measure': 'ç”¨æˆ·æ»¡æ„åº¦è°ƒæŸ¥'
    },
    'response_time': {
        'target': '<3ç§’',
        'measure': 'å¹³å‡å“åº”æ—¶é—´'
    },
    'issue_resolution_rate': {
        'target': 'æå‡40%',
        'measure': 'é—®é¢˜ä¸€æ¬¡æ€§è§£å†³ç‡'
    },
    'operational_efficiency': {
        'target': 'æå‡35%',
        'measure': 'è¿ç»´å·¥ä½œæ•ˆç‡'
    },
    'knowledge_growth': {
        'target': 'æ¯æœˆå¢é•¿15%',
        'measure': 'çŸ¥è¯†åº“å¢é•¿é€Ÿç‡'
    }
}
```text

---

## ğŸ¯ æ€»ç»“

è¿™ä¸ªAIæ™ºèƒ½å®¢æœç³»ç»Ÿä½œä¸ºé¡¶å±‚è‡ªæ²»å•å…ƒï¼Œä¸ºæ™ºèƒ½é¤é¥®ç³»ç»Ÿæä¾›äº†ï¼š

### ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **æµ®åŠ¨å¯æ‹–æ‹½**: ç‹¬ç«‹çš„Webç»„ä»¶ï¼Œå…¨å±€å¯è®¿é—®
- **å¤šæ¨¡æ€äº¤äº’**: æ”¯æŒæ–‡æœ¬ã€è¯­éŸ³ã€å›¾åƒç­‰å¤šç§äº¤äº’æ–¹å¼
- **æƒ…æ„Ÿæ™ºèƒ½**: æƒ…æ„Ÿè¯†åˆ«å’Œé€‚åº”æ€§å“åº”
- **è‡ªä¸»å­¦ä¹ **: æŒç»­ä»å¯¹è¯ä¸­å­¦ä¹ å’Œæ”¹è¿›
- **æ™ºèƒ½é¢„æµ‹**: ç”¨æˆ·æ„å›¾å’Œè¡Œä¸ºé¢„æµ‹
- **æƒé™åˆ†ç¦»**: å®¢æœæ¨¡å¼å’Œè¿ç»´æ¨¡å¼åˆ†ç¦»

### ğŸ—ï¸ æŠ€æœ¯å®ç°

- **å¾®æœåŠ¡æ¶æ„**: ç‹¬ç«‹çš„AIå®¢æœæœåŠ¡é›†ç¾¤
- **å¤§æ¨¡å‹é›†æˆ**: é›†æˆå…ˆè¿›çš„AIå¤§è¯­è¨€æ¨¡å‹
- **å®æ—¶é€šä¿¡**: WebSocketå’ŒSSEå®æ—¶äº¤äº’
- **çŸ¥è¯†ç®¡ç†**: å®Œæ•´çš„çŸ¥è¯†å­¦ä¹ å’Œæ£€ç´¢ç³»ç»Ÿ
- **ç›‘æ§è¿ç»´**: å®Œæ•´çš„ç›‘æ§å’Œè¿ç»´æ”¯æŒ

### ğŸ“Š ä¸šåŠ¡ä»·å€¼

- **å®¢æˆ·æœåŠ¡å‡çº§**: æä¾›æ™ºèƒ½åŒ–çš„å®¢æˆ·æœåŠ¡ä½“éªŒ
- **è¿ç»´æ•ˆç‡æå‡**: æ™ºèƒ½åŒ–çš„è¿ç»´æ”¯æŒå’Œé—®é¢˜è§£å†³
- **çŸ¥è¯†ç§¯ç´¯**: ç³»ç»ŸåŒ–çš„çŸ¥è¯†ç®¡ç†å’Œä¼ æ‰¿
- **æŒç»­è¿›åŒ–**: åŸºäºå­¦ä¹ çš„æŒç»­æ”¹è¿›å’Œä¼˜åŒ–

è¿™ä¸ªAIæ™ºèƒ½å®¢æœç³»ç»Ÿå°†æˆä¸ºæ•´ä¸ªæ™ºèƒ½é¤é¥®ç³»ç»Ÿçš„æ™ºèƒ½äº¤äº’å…¥å£ï¼Œä¸ºç”¨æˆ·å’Œè¿ç»´äººå‘˜æä¾›å…¨æ–¹ä½çš„æ™ºèƒ½æ”¯æŒæœåŠ¡ã€‚

**ç«‹å³é›†æˆè¿™ä¸ªå¼ºå¤§çš„AIæ™ºèƒ½å®¢æœç³»ç»Ÿï¼Œæå‡æ‚¨çš„é¤é¥®æ™ºèƒ½åŒ–æ°´å¹³ï¼** ğŸš€


